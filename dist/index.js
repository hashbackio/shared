'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.isNeutralFeedbackAnalysis = exports.isNegativeFeedbackAnalysis = exports.isPositiveFeedbackAnalysis = exports.AccountSettingSchema = exports.WatsonClassifierSchema = exports.AccountSettingPostBodySchema = exports.ZenDeskIntegrationSchema = exports.AccountIntegrationSchema = exports.TwitterFeedbackWithMaybeAnalysisSchema = exports.TwitterFeedbackSchema = exports.ZenDeskTicketWithMaybeAnalysisSchema = exports.ZenDeskTicketSchema = exports.ZenDeskTicketPostBodySchema = exports.EmailFeedbackWithMaybeAnalysisSchema = exports.EmailFeedbackSchema = exports.EmailFeedbackPostBodySchema = exports.WatsonClassifyResponseSchema = exports.FeedbackAnalysisSchema = exports.UserSchema = exports.EmailUserSchema = exports.TwitterUserSchema = exports.ZenDeskUserSchema = exports.feedbackTypes = exports.SentimentAnalysisResponseSchema = exports.CategorySchema = exports.SentimentSchema = exports.TextSpanSchema = exports.SupportedLanguageSchema = exports.getDynamoDbGlobalArn = exports.getTableNamePrefix = exports.getAnalyzeFeedbackTopicName = exports.getAnalyzeFeedbackSNS = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

// https://github.com/benmosher/eslint-plugin-import/issues/921
/* eslint-disable import/named */


var _Arns = require('./Arns');

Object.defineProperty(exports, 'getAnalyzeFeedbackSNS', {
  enumerable: true,
  get: function get() {
    return _Arns.getAnalyzeFeedbackSNS;
  }
});
Object.defineProperty(exports, 'getAnalyzeFeedbackTopicName', {
  enumerable: true,
  get: function get() {
    return _Arns.getAnalyzeFeedbackTopicName;
  }
});
Object.defineProperty(exports, 'getTableNamePrefix', {
  enumerable: true,
  get: function get() {
    return _Arns.getTableNamePrefix;
  }
});
Object.defineProperty(exports, 'getDynamoDbGlobalArn', {
  enumerable: true,
  get: function get() {
    return _Arns.getDynamoDbGlobalArn;
  }
});

var _joiBrowser = require('joi-browser');

var _joiBrowser2 = _interopRequireDefault(_joiBrowser);

var _uuid = require('uuid');

var _uuid2 = _interopRequireDefault(_uuid);

var _YearMonthBucket = require('./YearMonthBucket');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var ModelSavedFieldsSchema = {
  accountId: _joiBrowser2.default.string().required(),
  createdAt: _joiBrowser2.default.string().isoDate().required(),
  id: _joiBrowser2.default.string().guid().default(function () {
    return _uuid2.default.v4();
  }, 'uuid v4'),
  updatedAt: _joiBrowser2.default.string().isoDate()
};

var SupportedLanguageSchema = exports.SupportedLanguageSchema = _joiBrowser2.default.string().valid(['zh', 'zh-Hant', 'en', 'fr', 'de', 'it', 'ja', 'ko', 'pt', 'es']);

var TextSpanSchema = exports.TextSpanSchema = _joiBrowser2.default.object({
  beginOffset: _joiBrowser2.default.number().min(-1).required(),
  content: _joiBrowser2.default.string().required()
}).unknown();

var SentimentSchema = exports.SentimentSchema = _joiBrowser2.default.object({
  negative: _joiBrowser2.default.number().min(0).max(1).required(),
  positive: _joiBrowser2.default.number().min(0).max(1).required()
}).unknown();

var CategorySchema = exports.CategorySchema = _joiBrowser2.default.object({
  categoryName: _joiBrowser2.default.string().required(),
  confidence: _joiBrowser2.default.number().min(0).max(1).required()
}).unknown();

var SentimentAnalysisResponseSchema = exports.SentimentAnalysisResponseSchema = _joiBrowser2.default.object({
  documentSentiment: SentimentSchema.required(),
  language: SupportedLanguageSchema.required()
}).unknown();

var feedbackTypes = exports.feedbackTypes = ['email', 'twitter', 'zenDesk'];

var ZenDeskUserSchema = exports.ZenDeskUserSchema = _joiBrowser2.default.object({
  email: _joiBrowser2.default.string().email(),
  id: _joiBrowser2.default.number().min(0).required(),
  name: _joiBrowser2.default.string().required()
}).unknown();

var TwitterUserSchema = exports.TwitterUserSchema = _joiBrowser2.default.object({
  avatarUrl: _joiBrowser2.default.string().uri().required(),
  id: _joiBrowser2.default.string().required(),
  username: _joiBrowser2.default.string().required()
}).unknown();

var EmailUserSchema = exports.EmailUserSchema = _joiBrowser2.default.object({
  id: _joiBrowser2.default.string().email().required()
}).unknown();

var UserSchema = exports.UserSchema = _joiBrowser2.default.compile([TwitterUserSchema, EmailUserSchema, ZenDeskUserSchema]);

var FeedbackAnalysisSchema = exports.FeedbackAnalysisSchema = _joiBrowser2.default.object(_extends({}, ModelSavedFieldsSchema, {
  content: _joiBrowser2.default.string().required(),
  contentSentiment: SentimentSchema.required(),
  documentCategorization: _joiBrowser2.default.array().items(CategorySchema).default(function () {
    return [];
  }, 'Do not allow undefined or null to come out of the DB'),
  feedbackId: _joiBrowser2.default.string().guid().default(function () {
    return _uuid2.default.v4();
  }, 'uuid v4'),
  feedbackType: _joiBrowser2.default.string().allow(feedbackTypes).required(),
  topDocumentCategories: _joiBrowser2.default.array().items(_joiBrowser2.default.string()).default(function () {
    return [];
  }, 'Do not allow undefined or null to come out of the DB'),
  user: UserSchema,
  userId: _joiBrowser2.default.string().required()
})).unknown().required();

var WatsonClassifyResponseSchema = exports.WatsonClassifyResponseSchema = _joiBrowser2.default.object({
  classes: _joiBrowser2.default.array().items(_joiBrowser2.default.object({
    class_name: _joiBrowser2.default.string().required(),
    confidence: _joiBrowser2.default.number().min(0).max(1).required()
  }).unknown()).default(function () {
    return [];
  }, 'Do not allow undefined or null to come out of the DB'),
  classifier_id: _joiBrowser2.default.string().required(),
  text: _joiBrowser2.default.string().required(),
  top_class: _joiBrowser2.default.string().required(),
  url: _joiBrowser2.default.string().uri({ allowRelative: true }).required()
});

var EmailFeedbackPostBodySchema = exports.EmailFeedbackPostBodySchema = _joiBrowser2.default.object({
  content: _joiBrowser2.default.string().required(),
  emailSentDate: _joiBrowser2.default.string().isoDate().required(),
  from: _joiBrowser2.default.string().email().required(),
  subject: _joiBrowser2.default.string().required(),
  to: _joiBrowser2.default.string().email().required()
}).unknown().required();

var EmailFeedbackSchema = exports.EmailFeedbackSchema = EmailFeedbackPostBodySchema.keys(_extends({}, ModelSavedFieldsSchema)).unknown().required();

var EmailFeedbackWithMaybeAnalysisSchema = exports.EmailFeedbackWithMaybeAnalysisSchema = EmailFeedbackSchema.keys({
  analysis: FeedbackAnalysisSchema
}).unknown().required();

var ZenDeskTicketPostBodySchema = exports.ZenDeskTicketPostBodySchema = _joiBrowser2.default.object({
  description: _joiBrowser2.default.string().required(),
  ticketId: _joiBrowser2.default.number().required(),
  title: _joiBrowser2.default.string().required(),
  user: ZenDeskUserSchema.required()
}).unknown().required();

var ZenDeskTicketSchema = exports.ZenDeskTicketSchema = ZenDeskTicketPostBodySchema.keys(_extends({}, ModelSavedFieldsSchema)).unknown().required();

var ZenDeskTicketWithMaybeAnalysisSchema = exports.ZenDeskTicketWithMaybeAnalysisSchema = ZenDeskUserSchema.keys({
  analysis: FeedbackAnalysisSchema
}).unknown().required();

var TwitterFeedbackSchema = exports.TwitterFeedbackSchema = _joiBrowser2.default.object(_extends({}, ModelSavedFieldsSchema, {
  statusId: _joiBrowser2.default.string().required(),
  user: TwitterUserSchema.required()
})).unknown().required();

var TwitterFeedbackWithMaybeAnalysisSchema = exports.TwitterFeedbackWithMaybeAnalysisSchema = TwitterFeedbackSchema.keys({
  analysis: FeedbackAnalysisSchema
}).unknown().required();

var AccountIntegrationSchema = exports.AccountIntegrationSchema = _joiBrowser2.default.object({
  status: _joiBrowser2.default.string().valid(['disconnected', 'awaitingApproval', 'connected']).default('disconnected'),
  token: _joiBrowser2.default.string().required()
}).optionalKeys('token').unknown().default();

var ZenDeskIntegrationSchema = exports.ZenDeskIntegrationSchema = AccountIntegrationSchema.keys({
  fieldId: _joiBrowser2.default.number(),
  subdomain: _joiBrowser2.default.string().allow('').default(''),
  ticketImport: _joiBrowser2.default.object({
    inProgress: _joiBrowser2.default.boolean().default(false),
    nextPage: _joiBrowser2.default.number().default(0)
  }).unknown().default()
});

var AccountSettingPostBodySchema = exports.AccountSettingPostBodySchema = _joiBrowser2.default.object({
  twitterSearches: _joiBrowser2.default.array().items(_joiBrowser2.default.string()).default(function () {
    return [];
  }, 'Do not allow undefined or null to come out of the DB')
}).unknown().required();

var WatsonClassifierSchema = exports.WatsonClassifierSchema = _joiBrowser2.default.object({
  classifier_id: _joiBrowser2.default.string().required(),
  created: _joiBrowser2.default.string().required(),
  language: _joiBrowser2.default.string().required(),
  name: _joiBrowser2.default.string().required(),
  status: _joiBrowser2.default.string().valid(['Non Existent', 'Training', 'Failed', 'Available', 'Unavailable']).required(),
  status_description: _joiBrowser2.default.string().required(),
  url: _joiBrowser2.default.string().required()
});

var AccountSettingSchema = exports.AccountSettingSchema = _joiBrowser2.default.object(_extends({}, ModelSavedFieldsSchema, {
  apiToken: _joiBrowser2.default.string().guid(),
  feedbackUsageByDate: _joiBrowser2.default.object().pattern(_YearMonthBucket.YearMonthBucketRegex, _joiBrowser2.default.number().min(0).required()).required(),
  id: _joiBrowser2.default.string().required(),
  integrations: _joiBrowser2.default.object({
    zenDesk: ZenDeskIntegrationSchema
  }).default(),
  tier: _joiBrowser2.default.string().valid(['notApproved', 'free']).default('notApproved'),
  twitterSearches: _joiBrowser2.default.array().items(_joiBrowser2.default.string()).default(function () {
    return [];
  }, 'Do not allow undefined or null to come out of the DB'),
  watsonClassifier: WatsonClassifierSchema
})).unknown().required();

var isPositiveFeedbackAnalysis = exports.isPositiveFeedbackAnalysis = function isPositiveFeedbackAnalysis(_ref) {
  var positive = _ref.contentSentiment.positive;
  return positive > 0.65;
};

var isNegativeFeedbackAnalysis = exports.isNegativeFeedbackAnalysis = function isNegativeFeedbackAnalysis(_ref2) {
  var negative = _ref2.contentSentiment.negative;
  return negative > 0.65;
};

var isNeutralFeedbackAnalysis = exports.isNeutralFeedbackAnalysis = function isNeutralFeedbackAnalysis(feedback) {
  return !isNegativeFeedbackAnalysis(feedback) && !isPositiveFeedbackAnalysis(feedback);
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJnZXRBbmFseXplRmVlZGJhY2tTTlMiLCJnZXRBbmFseXplRmVlZGJhY2tUb3BpY05hbWUiLCJnZXRUYWJsZU5hbWVQcmVmaXgiLCJnZXREeW5hbW9EYkdsb2JhbEFybiIsIk1vZGVsU2F2ZWRGaWVsZHNTY2hlbWEiLCJhY2NvdW50SWQiLCJzdHJpbmciLCJyZXF1aXJlZCIsImNyZWF0ZWRBdCIsImlzb0RhdGUiLCJpZCIsImd1aWQiLCJkZWZhdWx0IiwidjQiLCJ1cGRhdGVkQXQiLCJTdXBwb3J0ZWRMYW5ndWFnZVNjaGVtYSIsInZhbGlkIiwiVGV4dFNwYW5TY2hlbWEiLCJvYmplY3QiLCJiZWdpbk9mZnNldCIsIm51bWJlciIsIm1pbiIsImNvbnRlbnQiLCJ1bmtub3duIiwiU2VudGltZW50U2NoZW1hIiwibmVnYXRpdmUiLCJtYXgiLCJwb3NpdGl2ZSIsIkNhdGVnb3J5U2NoZW1hIiwiY2F0ZWdvcnlOYW1lIiwiY29uZmlkZW5jZSIsIlNlbnRpbWVudEFuYWx5c2lzUmVzcG9uc2VTY2hlbWEiLCJkb2N1bWVudFNlbnRpbWVudCIsImxhbmd1YWdlIiwiZmVlZGJhY2tUeXBlcyIsIlplbkRlc2tVc2VyU2NoZW1hIiwiZW1haWwiLCJuYW1lIiwiVHdpdHRlclVzZXJTY2hlbWEiLCJhdmF0YXJVcmwiLCJ1cmkiLCJ1c2VybmFtZSIsIkVtYWlsVXNlclNjaGVtYSIsIlVzZXJTY2hlbWEiLCJjb21waWxlIiwiRmVlZGJhY2tBbmFseXNpc1NjaGVtYSIsImNvbnRlbnRTZW50aW1lbnQiLCJkb2N1bWVudENhdGVnb3JpemF0aW9uIiwiYXJyYXkiLCJpdGVtcyIsImZlZWRiYWNrSWQiLCJmZWVkYmFja1R5cGUiLCJhbGxvdyIsInRvcERvY3VtZW50Q2F0ZWdvcmllcyIsInVzZXIiLCJ1c2VySWQiLCJXYXRzb25DbGFzc2lmeVJlc3BvbnNlU2NoZW1hIiwiY2xhc3NlcyIsImNsYXNzX25hbWUiLCJjbGFzc2lmaWVyX2lkIiwidGV4dCIsInRvcF9jbGFzcyIsInVybCIsImFsbG93UmVsYXRpdmUiLCJFbWFpbEZlZWRiYWNrUG9zdEJvZHlTY2hlbWEiLCJlbWFpbFNlbnREYXRlIiwiZnJvbSIsInN1YmplY3QiLCJ0byIsIkVtYWlsRmVlZGJhY2tTY2hlbWEiLCJrZXlzIiwiRW1haWxGZWVkYmFja1dpdGhNYXliZUFuYWx5c2lzU2NoZW1hIiwiYW5hbHlzaXMiLCJaZW5EZXNrVGlja2V0UG9zdEJvZHlTY2hlbWEiLCJkZXNjcmlwdGlvbiIsInRpY2tldElkIiwidGl0bGUiLCJaZW5EZXNrVGlja2V0U2NoZW1hIiwiWmVuRGVza1RpY2tldFdpdGhNYXliZUFuYWx5c2lzU2NoZW1hIiwiVHdpdHRlckZlZWRiYWNrU2NoZW1hIiwic3RhdHVzSWQiLCJUd2l0dGVyRmVlZGJhY2tXaXRoTWF5YmVBbmFseXNpc1NjaGVtYSIsIkFjY291bnRJbnRlZ3JhdGlvblNjaGVtYSIsInN0YXR1cyIsInRva2VuIiwib3B0aW9uYWxLZXlzIiwiWmVuRGVza0ludGVncmF0aW9uU2NoZW1hIiwiZmllbGRJZCIsInN1YmRvbWFpbiIsInRpY2tldEltcG9ydCIsImluUHJvZ3Jlc3MiLCJib29sZWFuIiwibmV4dFBhZ2UiLCJBY2NvdW50U2V0dGluZ1Bvc3RCb2R5U2NoZW1hIiwidHdpdHRlclNlYXJjaGVzIiwiV2F0c29uQ2xhc3NpZmllclNjaGVtYSIsImNyZWF0ZWQiLCJzdGF0dXNfZGVzY3JpcHRpb24iLCJBY2NvdW50U2V0dGluZ1NjaGVtYSIsImFwaVRva2VuIiwiZmVlZGJhY2tVc2FnZUJ5RGF0ZSIsInBhdHRlcm4iLCJpbnRlZ3JhdGlvbnMiLCJ6ZW5EZXNrIiwidGllciIsIndhdHNvbkNsYXNzaWZpZXIiLCJpc1Bvc2l0aXZlRmVlZGJhY2tBbmFseXNpcyIsImlzTmVnYXRpdmVGZWVkYmFja0FuYWx5c2lzIiwiaXNOZXV0cmFsRmVlZGJhY2tBbmFseXNpcyIsImZlZWRiYWNrIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFLQTtBQUNB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b0IsU0FDeENxQixnQkFEd0MsQ0FDcEJyQixRQURvQjtBQUFBLFNBRWRBLFdBQVcsSUFGRztBQUFBLENBQW5DOztBQUlBLElBQU1tRixnRUFBNEIsU0FBNUJBLHlCQUE0QixDQUFDQyxRQUFEO0FBQUEsU0FDdkMsQ0FBQ0YsMkJBQTJCRSxRQUEzQixDQUFELElBQ0EsQ0FBQ0gsMkJBQTJCRyxRQUEzQixDQUZzQztBQUFBLENBQWxDIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQGZsb3dcblxuaW1wb3J0IEpvaSBmcm9tICdqb2ktYnJvd3Nlcic7XG5pbXBvcnQgdXVpZCBmcm9tICd1dWlkJztcblxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2Jlbm1vc2hlci9lc2xpbnQtcGx1Z2luLWltcG9ydC9pc3N1ZXMvOTIxXG4vKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbmFtZWQgKi9cbmltcG9ydCB7XG4gIFllYXJNb250aEJ1Y2tldFJlZ2V4LFxuICB0eXBlIFllYXJNb250aEJ1Y2tldFR5cGUsXG59IGZyb20gJy4vWWVhck1vbnRoQnVja2V0Jztcbi8qIGVzbGludC1lbmFibGUgKi9cblxuZXhwb3J0IHtcbiAgZ2V0QW5hbHl6ZUZlZWRiYWNrU05TLFxuICBnZXRBbmFseXplRmVlZGJhY2tUb3BpY05hbWUsXG4gIGdldFRhYmxlTmFtZVByZWZpeCxcbiAgZ2V0RHluYW1vRGJHbG9iYWxBcm4sXG59IGZyb20gJy4vQXJucyc7XG5cbmV4cG9ydCB0eXBlIE1vZGVsU2F2ZWRGaWVsZHNUeXBlID0ge3xcbiAgYWNjb3VudElkOiBzdHJpbmcsXG4gIGNyZWF0ZWRBdDogc3RyaW5nLFxuICBpZDogc3RyaW5nLFxuICB1cGRhdGVkQXQ/OiBzdHJpbmcsXG58fTtcblxuY29uc3QgTW9kZWxTYXZlZEZpZWxkc1NjaGVtYSA9IHtcbiAgYWNjb3VudElkOiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKSxcbiAgY3JlYXRlZEF0OiBKb2kuc3RyaW5nKClcbiAgICAuaXNvRGF0ZSgpXG4gICAgLnJlcXVpcmVkKCksXG4gIGlkOiBKb2kuc3RyaW5nKClcbiAgICAuZ3VpZCgpXG4gICAgLmRlZmF1bHQoKCkgPT4gdXVpZC52NCgpLCAndXVpZCB2NCcpLFxuICB1cGRhdGVkQXQ6IEpvaS5zdHJpbmcoKS5pc29EYXRlKCksXG59O1xuXG5leHBvcnQgdHlwZSBTdXBwb3J0ZWRMYW5ndWFnZVR5cGUgPVxuICB8ICd6aCdcbiAgfCAnemgtSGFudCdcbiAgfCAnZW4nXG4gIHwgJ2ZyJ1xuICB8ICdkZSdcbiAgfCAnaXQnXG4gIHwgJ2phJ1xuICB8ICdrbydcbiAgfCAncHQnXG4gIHwgJ2VzJztcblxuZXhwb3J0IGNvbnN0IFN1cHBvcnRlZExhbmd1YWdlU2NoZW1hID0gSm9pLnN0cmluZygpLnZhbGlkKFtcbiAgJ3poJyxcbiAgJ3poLUhhbnQnLFxuICAnZW4nLFxuICAnZnInLFxuICAnZGUnLFxuICAnaXQnLFxuICAnamEnLFxuICAna28nLFxuICAncHQnLFxuICAnZXMnLFxuXSk7XG5cbmV4cG9ydCBjb25zdCBUZXh0U3BhblNjaGVtYSA9IEpvaS5vYmplY3Qoe1xuICBiZWdpbk9mZnNldDogSm9pLm51bWJlcigpXG4gICAgLm1pbigtMSlcbiAgICAucmVxdWlyZWQoKSxcbiAgY29udGVudDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG59KS51bmtub3duKCk7XG5cbmV4cG9ydCB0eXBlIFNlbnRpbWVudFR5cGUgPSB7fFxuICBuZWdhdGl2ZTogbnVtYmVyLFxuICBwb3NpdGl2ZTogbnVtYmVyLFxufH07XG5cbmV4cG9ydCBjb25zdCBTZW50aW1lbnRTY2hlbWEgPSBKb2kub2JqZWN0KHtcbiAgbmVnYXRpdmU6IEpvaS5udW1iZXIoKVxuICAgIC5taW4oMClcbiAgICAubWF4KDEpXG4gICAgLnJlcXVpcmVkKCksXG4gIHBvc2l0aXZlOiBKb2kubnVtYmVyKClcbiAgICAubWluKDApXG4gICAgLm1heCgxKVxuICAgIC5yZXF1aXJlZCgpLFxufSkudW5rbm93bigpO1xuXG5leHBvcnQgdHlwZSBDYXRlZ29yeUNvbmZpZGVuY2VUeXBlID0ge1xuICBjYXRlZ29yeU5hbWU6IHN0cmluZyxcbiAgY29uZmlkZW5jZTogbnVtYmVyLFxufTtcblxuZXhwb3J0IGNvbnN0IENhdGVnb3J5U2NoZW1hID0gSm9pLm9iamVjdCh7XG4gIGNhdGVnb3J5TmFtZTogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIGNvbmZpZGVuY2U6IEpvaS5udW1iZXIoKVxuICAgIC5taW4oMClcbiAgICAubWF4KDEpXG4gICAgLnJlcXVpcmVkKCksXG59KS51bmtub3duKCk7XG5cbmV4cG9ydCB0eXBlIFNlbnRpbWVudEFuYWx5c2lzUmVzcG9uc2VUeXBlID0ge3xcbiAgZG9jdW1lbnRTZW50aW1lbnQ6IFNlbnRpbWVudFR5cGUsXG4gIGxhbmd1YWdlOiBTdXBwb3J0ZWRMYW5ndWFnZVR5cGUsXG58fTtcblxuZXhwb3J0IGNvbnN0IFNlbnRpbWVudEFuYWx5c2lzUmVzcG9uc2VTY2hlbWEgPSBKb2kub2JqZWN0KHtcbiAgZG9jdW1lbnRTZW50aW1lbnQ6IFNlbnRpbWVudFNjaGVtYS5yZXF1aXJlZCgpLFxuICBsYW5ndWFnZTogU3VwcG9ydGVkTGFuZ3VhZ2VTY2hlbWEucmVxdWlyZWQoKSxcbn0pLnVua25vd24oKTtcblxuZXhwb3J0IHR5cGUgRmVlZGJhY2tUeXBlID0gJ2VtYWlsJyB8ICd0d2l0dGVyJyB8ICd6ZW5EZXNrJztcblxuZXhwb3J0IGNvbnN0IGZlZWRiYWNrVHlwZXMgPSBbJ2VtYWlsJywgJ3R3aXR0ZXInLCAnemVuRGVzayddO1xuXG5leHBvcnQgdHlwZSBaZW5EZXNrVXNlclR5cGUgPSB7fFxuICBlbWFpbDogc3RyaW5nLFxuICBpZDogbnVtYmVyLFxuICBuYW1lOiBzdHJpbmcsXG58fTtcblxuZXhwb3J0IGNvbnN0IFplbkRlc2tVc2VyU2NoZW1hID0gSm9pLm9iamVjdCh7XG4gIGVtYWlsOiBKb2kuc3RyaW5nKCkuZW1haWwoKSxcbiAgaWQ6IEpvaS5udW1iZXIoKVxuICAgIC5taW4oMClcbiAgICAucmVxdWlyZWQoKSxcbiAgbmFtZTogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG59KS51bmtub3duKCk7XG5cbmV4cG9ydCB0eXBlIFR3aXR0ZXJVc2VyVHlwZSA9IHt8XG4gIGF2YXRhclVybDogc3RyaW5nLFxuICBpZDogc3RyaW5nLFxuICB1c2VybmFtZTogc3RyaW5nLFxufH07XG5cbmV4cG9ydCBjb25zdCBUd2l0dGVyVXNlclNjaGVtYSA9IEpvaS5vYmplY3Qoe1xuICBhdmF0YXJVcmw6IEpvaS5zdHJpbmcoKVxuICAgIC51cmkoKVxuICAgIC5yZXF1aXJlZCgpLFxuICBpZDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIHVzZXJuYW1lOiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKSxcbn0pLnVua25vd24oKTtcblxuZXhwb3J0IHR5cGUgRW1haWxVc2VyVHlwZSA9IHt8XG4gIGlkOiBzdHJpbmcsXG58fTtcblxuZXhwb3J0IGNvbnN0IEVtYWlsVXNlclNjaGVtYSA9IEpvaS5vYmplY3Qoe1xuICBpZDogSm9pLnN0cmluZygpXG4gICAgLmVtYWlsKClcbiAgICAucmVxdWlyZWQoKSxcbn0pLnVua25vd24oKTtcblxuZXhwb3J0IHR5cGUgVXNlclR5cGUgPSBFbWFpbFVzZXJUeXBlIHwgVHdpdHRlclVzZXJUeXBlIHwgWmVuRGVza1VzZXJUeXBlO1xuXG5leHBvcnQgY29uc3QgVXNlclNjaGVtYSA9IEpvaS5jb21waWxlKFtcbiAgVHdpdHRlclVzZXJTY2hlbWEsXG4gIEVtYWlsVXNlclNjaGVtYSxcbiAgWmVuRGVza1VzZXJTY2hlbWEsXG5dKTtcblxuZXhwb3J0IHR5cGUgRmVlZGJhY2tTZW50aW1lbnRBbmRDYXRlZ29yaXphdGlvblR5cGUgPSB7fFxuICBjb250ZW50U2VudGltZW50OiBTZW50aW1lbnRUeXBlLFxuICBkb2N1bWVudENhdGVnb3JpemF0aW9uOiBDYXRlZ29yeUNvbmZpZGVuY2VUeXBlW10sXG4gIHRvcERvY3VtZW50Q2F0ZWdvcmllczogQXJyYXk8c3RyaW5nPixcbnx9O1xuXG5leHBvcnQgdHlwZSBGZWVkYmFja0FuYWx5c2lzVW5zYXZlZFR5cGUgPSB7fFxuICAuLi5GZWVkYmFja1NlbnRpbWVudEFuZENhdGVnb3JpemF0aW9uVHlwZSxcbiAgYWNjb3VudElkOiBzdHJpbmcsXG4gIGNvbnRlbnQ6IHN0cmluZyxcbiAgZmVlZGJhY2tJZDogc3RyaW5nLFxuICBmZWVkYmFja1R5cGU6IEZlZWRiYWNrVHlwZSxcbiAgdXNlcjogVXNlclR5cGUsXG4gIHVzZXJJZDogc3RyaW5nLFxufH07XG5cbmV4cG9ydCB0eXBlIEZlZWRiYWNrQW5hbHlzaXNUeXBlID0ge1xuICAuLi5GZWVkYmFja0FuYWx5c2lzVW5zYXZlZFR5cGUsXG4gIC4uLk1vZGVsU2F2ZWRGaWVsZHNUeXBlLFxufTtcblxuZXhwb3J0IGNvbnN0IEZlZWRiYWNrQW5hbHlzaXNTY2hlbWEgPSBKb2kub2JqZWN0KHtcbiAgLi4uTW9kZWxTYXZlZEZpZWxkc1NjaGVtYSxcbiAgY29udGVudDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIGNvbnRlbnRTZW50aW1lbnQ6IFNlbnRpbWVudFNjaGVtYS5yZXF1aXJlZCgpLFxuICBkb2N1bWVudENhdGVnb3JpemF0aW9uOiBKb2kuYXJyYXkoKVxuICAgIC5pdGVtcyhDYXRlZ29yeVNjaGVtYSlcbiAgICAuZGVmYXVsdCgoKSA9PiBbXSwgJ0RvIG5vdCBhbGxvdyB1bmRlZmluZWQgb3IgbnVsbCB0byBjb21lIG91dCBvZiB0aGUgREInKSxcbiAgZmVlZGJhY2tJZDogSm9pLnN0cmluZygpXG4gICAgLmd1aWQoKVxuICAgIC5kZWZhdWx0KCgpID0+IHV1aWQudjQoKSwgJ3V1aWQgdjQnKSxcbiAgZmVlZGJhY2tUeXBlOiBKb2kuc3RyaW5nKClcbiAgICAuYWxsb3coZmVlZGJhY2tUeXBlcylcbiAgICAucmVxdWlyZWQoKSxcbiAgdG9wRG9jdW1lbnRDYXRlZ29yaWVzOiBKb2kuYXJyYXkoKVxuICAgIC5pdGVtcyhKb2kuc3RyaW5nKCkpXG4gICAgLmRlZmF1bHQoKCkgPT4gW10sICdEbyBub3QgYWxsb3cgdW5kZWZpbmVkIG9yIG51bGwgdG8gY29tZSBvdXQgb2YgdGhlIERCJyksXG4gIHVzZXI6IFVzZXJTY2hlbWEsXG4gIHVzZXJJZDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG59KVxuICAudW5rbm93bigpXG4gIC5yZXF1aXJlZCgpO1xuXG5leHBvcnQgdHlwZSBXYXRzb25DbGFzc2lmeVJlc3BvbnNlVHlwZSA9IHtcbiAgY2xhc3NlczogQXJyYXk8eyBjbGFzc19uYW1lOiBzdHJpbmcsIGNvbmZpZGVuY2U6IG51bWJlciB9PixcbiAgY2xhc3NpZmllcl9pZDogc3RyaW5nLFxuICB0ZXh0OiBzdHJpbmcsXG4gIHRvcF9jbGFzczogc3RyaW5nLFxuICB1cmw6IHN0cmluZyxcbn07XG5cbmV4cG9ydCBjb25zdCBXYXRzb25DbGFzc2lmeVJlc3BvbnNlU2NoZW1hID0gSm9pLm9iamVjdCh7XG4gIGNsYXNzZXM6IEpvaS5hcnJheSgpXG4gICAgLml0ZW1zKFxuICAgICAgSm9pLm9iamVjdCh7XG4gICAgICAgIGNsYXNzX25hbWU6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICAgICAgICBjb25maWRlbmNlOiBKb2kubnVtYmVyKClcbiAgICAgICAgICAubWluKDApXG4gICAgICAgICAgLm1heCgxKVxuICAgICAgICAgIC5yZXF1aXJlZCgpLFxuICAgICAgfSkudW5rbm93bigpXG4gICAgKVxuICAgIC5kZWZhdWx0KCgpID0+IFtdLCAnRG8gbm90IGFsbG93IHVuZGVmaW5lZCBvciBudWxsIHRvIGNvbWUgb3V0IG9mIHRoZSBEQicpLFxuICBjbGFzc2lmaWVyX2lkOiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKSxcbiAgdGV4dDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIHRvcF9jbGFzczogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIHVybDogSm9pLnN0cmluZygpXG4gICAgLnVyaSh7IGFsbG93UmVsYXRpdmU6IHRydWUgfSlcbiAgICAucmVxdWlyZWQoKSxcbn0pO1xuXG5leHBvcnQgdHlwZSBFbWFpbEZlZWRiYWNrUG9zdEJvZHlUeXBlID0ge3xcbiAgY29udGVudDogc3RyaW5nLFxuICBlbWFpbFNlbnREYXRlOiBzdHJpbmcsXG4gIGZyb206IHN0cmluZyxcbiAgc3ViamVjdDogc3RyaW5nLFxuICB0bzogc3RyaW5nLFxufH07XG5cbmV4cG9ydCBjb25zdCBFbWFpbEZlZWRiYWNrUG9zdEJvZHlTY2hlbWEgPSBKb2kub2JqZWN0KHtcbiAgY29udGVudDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIGVtYWlsU2VudERhdGU6IEpvaS5zdHJpbmcoKVxuICAgIC5pc29EYXRlKClcbiAgICAucmVxdWlyZWQoKSxcbiAgZnJvbTogSm9pLnN0cmluZygpXG4gICAgLmVtYWlsKClcbiAgICAucmVxdWlyZWQoKSxcbiAgc3ViamVjdDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIHRvOiBKb2kuc3RyaW5nKClcbiAgICAuZW1haWwoKVxuICAgIC5yZXF1aXJlZCgpLFxufSlcbiAgLnVua25vd24oKVxuICAucmVxdWlyZWQoKTtcblxuZXhwb3J0IHR5cGUgRW1haWxGZWVkYmFja1Vuc2F2ZWRUeXBlID0ge3xcbiAgLi4uRW1haWxGZWVkYmFja1Bvc3RCb2R5VHlwZSxcbiAgYWNjb3VudElkOiBzdHJpbmcsXG58fTtcblxuZXhwb3J0IHR5cGUgRW1haWxGZWVkYmFja1R5cGUgPSB7XG4gIC4uLkVtYWlsRmVlZGJhY2tVbnNhdmVkVHlwZSxcbiAgLi4uTW9kZWxTYXZlZEZpZWxkc1R5cGUsXG59O1xuXG5leHBvcnQgY29uc3QgRW1haWxGZWVkYmFja1NjaGVtYSA9IEVtYWlsRmVlZGJhY2tQb3N0Qm9keVNjaGVtYS5rZXlzKHtcbiAgLi4uTW9kZWxTYXZlZEZpZWxkc1NjaGVtYSxcbn0pXG4gIC51bmtub3duKClcbiAgLnJlcXVpcmVkKCk7XG5cbmV4cG9ydCB0eXBlIEVtYWlsRmVlZGJhY2tXaXRoTWF5YmVBbmFseXNpc1R5cGUgPSB7XG4gIC4uLkVtYWlsRmVlZGJhY2tUeXBlLFxuICBhbmFseXNpczogP0ZlZWRiYWNrQW5hbHlzaXNUeXBlLFxufTtcblxuZXhwb3J0IGNvbnN0IEVtYWlsRmVlZGJhY2tXaXRoTWF5YmVBbmFseXNpc1NjaGVtYSA9IEVtYWlsRmVlZGJhY2tTY2hlbWEua2V5cyh7XG4gIGFuYWx5c2lzOiBGZWVkYmFja0FuYWx5c2lzU2NoZW1hLFxufSlcbiAgLnVua25vd24oKVxuICAucmVxdWlyZWQoKTtcblxuZXhwb3J0IHR5cGUgWmVuRGVza1RpY2tldFBvc3RCb2R5VHlwZSA9IHt8XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmcsXG4gIHRpY2tldElkOiBudW1iZXIsXG4gIHRpdGxlOiBzdHJpbmcsXG4gIHVzZXI6IFplbkRlc2tVc2VyVHlwZSxcbnx9O1xuXG5leHBvcnQgY29uc3QgWmVuRGVza1RpY2tldFBvc3RCb2R5U2NoZW1hID0gSm9pLm9iamVjdCh7XG4gIGRlc2NyaXB0aW9uOiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKSxcbiAgdGlja2V0SWQ6IEpvaS5udW1iZXIoKS5yZXF1aXJlZCgpLFxuICB0aXRsZTogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIHVzZXI6IFplbkRlc2tVc2VyU2NoZW1hLnJlcXVpcmVkKCksXG59KVxuICAudW5rbm93bigpXG4gIC5yZXF1aXJlZCgpO1xuXG5leHBvcnQgdHlwZSBaZW5EZXNrVGlja2V0VW5zYXZlZFR5cGUgPSB7fFxuICAuLi5aZW5EZXNrVGlja2V0UG9zdEJvZHlUeXBlLFxuICBhY2NvdW50SWQ6IHN0cmluZyxcbnx9O1xuXG5leHBvcnQgdHlwZSBaZW5EZXNrVGlja2V0VHlwZSA9IHt8XG4gIC4uLlplbkRlc2tUaWNrZXRVbnNhdmVkVHlwZSxcbiAgLi4uTW9kZWxTYXZlZEZpZWxkc1R5cGUsXG58fTtcblxuZXhwb3J0IGNvbnN0IFplbkRlc2tUaWNrZXRTY2hlbWEgPSBaZW5EZXNrVGlja2V0UG9zdEJvZHlTY2hlbWEua2V5cyh7XG4gIC4uLk1vZGVsU2F2ZWRGaWVsZHNTY2hlbWEsXG59KVxuICAudW5rbm93bigpXG4gIC5yZXF1aXJlZCgpO1xuXG5leHBvcnQgdHlwZSBaZW5EZXNrVGlja2V0V2l0aE1heWJlQW5hbHlzaXNUeXBlID0ge1xuICAuLi5aZW5EZXNrVGlja2V0VHlwZSxcbiAgYW5hbHlzaXM6ID9GZWVkYmFja0FuYWx5c2lzVHlwZSxcbn07XG5cbmV4cG9ydCBjb25zdCBaZW5EZXNrVGlja2V0V2l0aE1heWJlQW5hbHlzaXNTY2hlbWEgPSBaZW5EZXNrVXNlclNjaGVtYS5rZXlzKHtcbiAgYW5hbHlzaXM6IEZlZWRiYWNrQW5hbHlzaXNTY2hlbWEsXG59KVxuICAudW5rbm93bigpXG4gIC5yZXF1aXJlZCgpO1xuXG5leHBvcnQgdHlwZSBUd2l0dGVyRmVlZGJhY2tVbnNhdmVkVHlwZSA9IHt8XG4gIGFjY291bnRJZDogc3RyaW5nLFxuICBzdGF0dXNJZDogc3RyaW5nLFxuICB1c2VyOiBUd2l0dGVyVXNlclR5cGUsXG58fTtcblxuZXhwb3J0IHR5cGUgVHdpdHRlckZlZWRiYWNrVHlwZSA9IHtcbiAgLi4uVHdpdHRlckZlZWRiYWNrVW5zYXZlZFR5cGUsXG4gIC4uLk1vZGVsU2F2ZWRGaWVsZHNUeXBlLFxufTtcblxuZXhwb3J0IGNvbnN0IFR3aXR0ZXJGZWVkYmFja1NjaGVtYSA9IEpvaS5vYmplY3Qoe1xuICAuLi5Nb2RlbFNhdmVkRmllbGRzU2NoZW1hLFxuICBzdGF0dXNJZDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIHVzZXI6IFR3aXR0ZXJVc2VyU2NoZW1hLnJlcXVpcmVkKCksXG59KVxuICAudW5rbm93bigpXG4gIC5yZXF1aXJlZCgpO1xuXG5leHBvcnQgdHlwZSBUd2l0dGVyRmVlZGJhY2tXaXRoTWF5YmVBbmFseXNpc1R5cGUgPSB7XG4gIC4uLlR3aXR0ZXJGZWVkYmFja1R5cGUsXG4gIGFuYWx5c2lzOiA/RmVlZGJhY2tBbmFseXNpc1R5cGUsXG59O1xuXG5leHBvcnQgY29uc3QgVHdpdHRlckZlZWRiYWNrV2l0aE1heWJlQW5hbHlzaXNTY2hlbWEgPSBUd2l0dGVyRmVlZGJhY2tTY2hlbWEua2V5cyhcbiAge1xuICAgIGFuYWx5c2lzOiBGZWVkYmFja0FuYWx5c2lzU2NoZW1hLFxuICB9XG4pXG4gIC51bmtub3duKClcbiAgLnJlcXVpcmVkKCk7XG5cbmV4cG9ydCB0eXBlIEFjY291bnRUaWVyVHlwZSA9ICdub3RBcHByb3ZlZCcgfCAnZnJlZSc7XG5cbmV4cG9ydCB0eXBlIEFjY291bnRJbnRlZ3JhdGlvblN0YXR1c1R5cGUgPVxuICB8ICdkaXNjb25uZWN0ZWQnXG4gIHwgJ2F3YWl0aW5nQXBwcm92YWwnXG4gIHwgJ2Nvbm5lY3RlZCc7XG5cbmV4cG9ydCB0eXBlIEFjY291bnRJbnRlZ3JhdGlvblR5cGUgPSB7fFxuICBzdGF0dXM6IEFjY291bnRJbnRlZ3JhdGlvblN0YXR1c1R5cGUsXG4gIHRva2VuPzogc3RyaW5nLFxufH07XG5cbmV4cG9ydCB0eXBlIFplbkRlc2tJbnRlZ3JhdGlvblR5cGUgPSB7XG4gIC4uLkFjY291bnRJbnRlZ3JhdGlvblR5cGUsXG4gIGZpZWxkSWQ/OiBudW1iZXIsXG4gIHN1YmRvbWFpbjogc3RyaW5nLFxuICB0aWNrZXRJbXBvcnQ6IHtcbiAgICBpblByb2dyZXNzOiBib29sZWFuLFxuICAgIG5leHRQYWdlOiBudW1iZXIsXG4gIH0sXG59O1xuXG5leHBvcnQgY29uc3QgQWNjb3VudEludGVncmF0aW9uU2NoZW1hID0gSm9pLm9iamVjdCh7XG4gIHN0YXR1czogSm9pLnN0cmluZygpXG4gICAgLnZhbGlkKFsnZGlzY29ubmVjdGVkJywgJ2F3YWl0aW5nQXBwcm92YWwnLCAnY29ubmVjdGVkJ10pXG4gICAgLmRlZmF1bHQoJ2Rpc2Nvbm5lY3RlZCcpLFxuICB0b2tlbjogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG59KVxuICAub3B0aW9uYWxLZXlzKCd0b2tlbicpXG4gIC51bmtub3duKClcbiAgLmRlZmF1bHQoKTtcblxuZXhwb3J0IGNvbnN0IFplbkRlc2tJbnRlZ3JhdGlvblNjaGVtYSA9IEFjY291bnRJbnRlZ3JhdGlvblNjaGVtYS5rZXlzKHtcbiAgZmllbGRJZDogSm9pLm51bWJlcigpLFxuICBzdWJkb21haW46IEpvaS5zdHJpbmcoKVxuICAgIC5hbGxvdygnJylcbiAgICAuZGVmYXVsdCgnJyksXG4gIHRpY2tldEltcG9ydDogSm9pLm9iamVjdCh7XG4gICAgaW5Qcm9ncmVzczogSm9pLmJvb2xlYW4oKS5kZWZhdWx0KGZhbHNlKSxcbiAgICBuZXh0UGFnZTogSm9pLm51bWJlcigpLmRlZmF1bHQoMCksXG4gIH0pXG4gICAgLnVua25vd24oKVxuICAgIC5kZWZhdWx0KCksXG59KTtcblxuZXhwb3J0IHR5cGUgQWNjb3VudFNldHRpbmdQb3N0Qm9keVR5cGUgPSB7fFxuICB0d2l0dGVyU2VhcmNoZXM6IHN0cmluZ1tdLFxufH07XG5cbmV4cG9ydCBjb25zdCBBY2NvdW50U2V0dGluZ1Bvc3RCb2R5U2NoZW1hID0gSm9pLm9iamVjdCh7XG4gIHR3aXR0ZXJTZWFyY2hlczogSm9pLmFycmF5KClcbiAgICAuaXRlbXMoSm9pLnN0cmluZygpKVxuICAgIC5kZWZhdWx0KCgpID0+IFtdLCAnRG8gbm90IGFsbG93IHVuZGVmaW5lZCBvciBudWxsIHRvIGNvbWUgb3V0IG9mIHRoZSBEQicpLFxufSlcbiAgLnVua25vd24oKVxuICAucmVxdWlyZWQoKTtcblxuZXhwb3J0IHR5cGUgV2F0c29uQ2xhc3NpZmllclR5cGUgPSB7fFxuICBjbGFzc2lmaWVyX2lkOiBzdHJpbmcsXG4gIGNyZWF0ZWQ6IHN0cmluZyxcbiAgbGFuZ3VhZ2U6IHN0cmluZyxcbiAgbmFtZTogc3RyaW5nLFxuICBzdGF0dXM6ICdOb24gRXhpc3RlbnQnIHwgJ1RyYWluaW5nJyB8ICdGYWlsZWQnIHwgJ0F2YWlsYWJsZScgfCAnVW5hdmFpbGFibGUnLFxuICBzdGF0dXNfZGVzY3JpcHRpb246IHN0cmluZyxcbiAgdXJsOiBzdHJpbmcsXG58fTtcblxuZXhwb3J0IGNvbnN0IFdhdHNvbkNsYXNzaWZpZXJTY2hlbWEgPSBKb2kub2JqZWN0KHtcbiAgY2xhc3NpZmllcl9pZDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIGNyZWF0ZWQ6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICBsYW5ndWFnZTogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIG5hbWU6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICBzdGF0dXM6IEpvaS5zdHJpbmcoKVxuICAgIC52YWxpZChbJ05vbiBFeGlzdGVudCcsICdUcmFpbmluZycsICdGYWlsZWQnLCAnQXZhaWxhYmxlJywgJ1VuYXZhaWxhYmxlJ10pXG4gICAgLnJlcXVpcmVkKCksXG4gIHN0YXR1c19kZXNjcmlwdGlvbjogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIHVybDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG59KTtcblxuZXhwb3J0IHR5cGUgQWNjb3VudFNldHRpbmdVbnNhdmVkVHlwZSA9IHt8XG4gIC4uLkFjY291bnRTZXR0aW5nUG9zdEJvZHlUeXBlLFxuICBhY2NvdW50SWQ6IHN0cmluZyxcbiAgYXBpVG9rZW46ID9zdHJpbmcsXG4gIGZlZWRiYWNrVXNhZ2VCeURhdGU6IHtcbiAgICBba2V5OiBZZWFyTW9udGhCdWNrZXRUeXBlXTogbnVtYmVyLFxuICB9LFxuICBpbnRlZ3JhdGlvbnM6IHtcbiAgICB6ZW5EZXNrOiBaZW5EZXNrSW50ZWdyYXRpb25UeXBlLFxuICB9LFxuICB0aWVyOiBBY2NvdW50VGllclR5cGUsXG4gIHdhdHNvbkNsYXNzaWZpZXI6ID9XYXRzb25DbGFzc2lmaWVyVHlwZSxcbnx9O1xuXG5leHBvcnQgdHlwZSBBY2NvdW50U2V0dGluZ1R5cGUgPSB7XG4gIC4uLkFjY291bnRTZXR0aW5nVW5zYXZlZFR5cGUsXG4gIC4uLk1vZGVsU2F2ZWRGaWVsZHNUeXBlLFxufTtcblxuZXhwb3J0IGNvbnN0IEFjY291bnRTZXR0aW5nU2NoZW1hID0gSm9pLm9iamVjdCh7XG4gIC4uLk1vZGVsU2F2ZWRGaWVsZHNTY2hlbWEsXG4gIGFwaVRva2VuOiBKb2kuc3RyaW5nKCkuZ3VpZCgpLFxuICBmZWVkYmFja1VzYWdlQnlEYXRlOiBKb2kub2JqZWN0KClcbiAgICAucGF0dGVybihcbiAgICAgIFllYXJNb250aEJ1Y2tldFJlZ2V4LFxuICAgICAgSm9pLm51bWJlcigpXG4gICAgICAgIC5taW4oMClcbiAgICAgICAgLnJlcXVpcmVkKClcbiAgICApXG4gICAgLnJlcXVpcmVkKCksXG4gIGlkOiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKSxcbiAgaW50ZWdyYXRpb25zOiBKb2kub2JqZWN0KHtcbiAgICB6ZW5EZXNrOiBaZW5EZXNrSW50ZWdyYXRpb25TY2hlbWEsXG4gIH0pLmRlZmF1bHQoKSxcbiAgdGllcjogSm9pLnN0cmluZygpXG4gICAgLnZhbGlkKFsnbm90QXBwcm92ZWQnLCAnZnJlZSddKVxuICAgIC5kZWZhdWx0KCdub3RBcHByb3ZlZCcpLFxuICB0d2l0dGVyU2VhcmNoZXM6IEpvaS5hcnJheSgpXG4gICAgLml0ZW1zKEpvaS5zdHJpbmcoKSlcbiAgICAuZGVmYXVsdCgoKSA9PiBbXSwgJ0RvIG5vdCBhbGxvdyB1bmRlZmluZWQgb3IgbnVsbCB0byBjb21lIG91dCBvZiB0aGUgREInKSxcbiAgd2F0c29uQ2xhc3NpZmllcjogV2F0c29uQ2xhc3NpZmllclNjaGVtYSxcbn0pXG4gIC51bmtub3duKClcbiAgLnJlcXVpcmVkKCk7XG5cbmV4cG9ydCBjb25zdCBpc1Bvc2l0aXZlRmVlZGJhY2tBbmFseXNpcyA9ICh7XG4gIGNvbnRlbnRTZW50aW1lbnQ6IHsgcG9zaXRpdmUgfSxcbn06IEZlZWRiYWNrQW5hbHlzaXNUeXBlKSA9PiBwb3NpdGl2ZSA+IDAuNjU7XG5cbmV4cG9ydCBjb25zdCBpc05lZ2F0aXZlRmVlZGJhY2tBbmFseXNpcyA9ICh7XG4gIGNvbnRlbnRTZW50aW1lbnQ6IHsgbmVnYXRpdmUgfSxcbn06IEZlZWRiYWNrQW5hbHlzaXNUeXBlKSA9PiBuZWdhdGl2ZSA+IDAuNjU7XG5cbmV4cG9ydCBjb25zdCBpc05ldXRyYWxGZWVkYmFja0FuYWx5c2lzID0gKGZlZWRiYWNrOiBGZWVkYmFja0FuYWx5c2lzVHlwZSkgPT5cbiAgIWlzTmVnYXRpdmVGZWVkYmFja0FuYWx5c2lzKGZlZWRiYWNrKSAmJlxuICAhaXNQb3NpdGl2ZUZlZWRiYWNrQW5hbHlzaXMoZmVlZGJhY2spO1xuIl19