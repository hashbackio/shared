'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.AccountSettingSchema = exports.AccountSettingPostBodySchema = exports.TwitterFeedbackWithMaybeAnalysisSchema = exports.TwitterFeedbackSchema = exports.EmailFeedbackWithMaybeAnalysisSchema = exports.EmailFeedbackSchema = exports.EmailFeedbackPostBodySchema = exports.WatsonClassifyResponseSchema = exports.FeedbackAnalysisSchema = exports.SentimentAnalysisResponseSchema = exports.SentenceSchema = exports.ClassSchema = exports.SentimentSchema = exports.TextSpanSchema = exports.SupportedLanguageSchema = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

// https://github.com/benmosher/eslint-plugin-import/issues/921
/* eslint-disable import/named */


var _joiBrowser = require('joi-browser');

var _joiBrowser2 = _interopRequireDefault(_joiBrowser);

var _uuid = require('uuid');

var _uuid2 = _interopRequireDefault(_uuid);

var _YearMonthBucket = require('./YearMonthBucket');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/* eslint-enable */

var ModelSavedFieldsSchema = {
  accountId: _joiBrowser2.default.string().required(),
  createdAt: _joiBrowser2.default.date().iso().required(),
  id: _joiBrowser2.default.string().guid().default(function () {
    return _uuid2.default.v4();
  }, 'uuid v4'),
  updatedAt: _joiBrowser2.default.date().iso()
};

var SupportedLanguageSchema = exports.SupportedLanguageSchema = _joiBrowser2.default.string().valid(['zh', 'zh-Hant', 'en', 'fr', 'de', 'it', 'ja', 'ko', 'pt', 'es']);

var TextSpanSchema = exports.TextSpanSchema = _joiBrowser2.default.object({
  beginOffset: _joiBrowser2.default.number().min(-1).required(),
  content: _joiBrowser2.default.string().required()
}).unknown();

var SentimentSchema = exports.SentimentSchema = _joiBrowser2.default.object({
  magnitude: _joiBrowser2.default.number().min(0).required(),
  score: _joiBrowser2.default.number().min(-1).max(1).required()
}).unknown();

var ClassSchema = exports.ClassSchema = _joiBrowser2.default.object({
  className: _joiBrowser2.default.string().required(),
  confidence: _joiBrowser2.default.number().min(0).max(1).required()
}).unknown();

var SentenceSchema = exports.SentenceSchema = _joiBrowser2.default.object({
  sentiment: SentimentSchema.required(),
  text: TextSpanSchema.required()
}).unknown();

var SentimentAnalysisResponseSchema = exports.SentimentAnalysisResponseSchema = _joiBrowser2.default.object({
  documentSentiment: SentimentSchema.required(),
  language: SupportedLanguageSchema.required(),
  sentences: _joiBrowser2.default.array().items(SentenceSchema).required()
}).unknown();

var FeedbackAnalysisSchema = exports.FeedbackAnalysisSchema = _joiBrowser2.default.object(_extends({}, ModelSavedFieldsSchema, {
  contentSentiment: SentimentSchema.required(),
  documentClassification: _joiBrowser2.default.array().items(ClassSchema).required(),
  feedbackId: _joiBrowser2.default.string().guid().default(function () {
    return _uuid2.default.v4();
  }, 'uuid v4'),
  feedbackType: _joiBrowser2.default.string().allow(['email', 'twitter']).required(),
  sentences: _joiBrowser2.default.array().items(SentenceSchema.keys({
    classification: _joiBrowser2.default.array().items(ClassSchema).required()
  }).required()).required(),
  topDocumentClasses: _joiBrowser2.default.array().items(_joiBrowser2.default.string()).required(),
  topSentenceClasses: _joiBrowser2.default.array().items(_joiBrowser2.default.string()).required()
})).unknown().required();

var WatsonClassifyResponseSchema = exports.WatsonClassifyResponseSchema = _joiBrowser2.default.object({
  classes: _joiBrowser2.default.array().items(_joiBrowser2.default.object({
    class_name: _joiBrowser2.default.string().required(),
    confidence: _joiBrowser2.default.number().min(0).max(1).required()
  }).unknown()).required(),
  classifier_id: _joiBrowser2.default.string().required(),
  text: _joiBrowser2.default.string().required(),
  top_class: _joiBrowser2.default.string().required(),
  url: _joiBrowser2.default.string().uri({ allowRelative: true }).required()
});

var EmailFeedbackPostBodySchema = exports.EmailFeedbackPostBodySchema = _joiBrowser2.default.object({
  content: _joiBrowser2.default.string().required(),
  emailSentDate: _joiBrowser2.default.string().isoDate().required(),
  from: _joiBrowser2.default.string().email().required(),
  subject: _joiBrowser2.default.string().required(),
  to: _joiBrowser2.default.string().email().required()
}).unknown().required();

var EmailFeedbackSchema = exports.EmailFeedbackSchema = EmailFeedbackPostBodySchema.keys(_extends({}, ModelSavedFieldsSchema)).unknown().required();

var EmailFeedbackWithMaybeAnalysisSchema = exports.EmailFeedbackWithMaybeAnalysisSchema = EmailFeedbackSchema.keys({
  analysis: FeedbackAnalysisSchema
}).unknown().required();

var TwitterFeedbackSchema = exports.TwitterFeedbackSchema = _joiBrowser2.default.object(_extends({}, ModelSavedFieldsSchema, {
  statusId: _joiBrowser2.default.string().required()
})).unknown().required();

var TwitterFeedbackWithMaybeAnalysisSchema = exports.TwitterFeedbackWithMaybeAnalysisSchema = TwitterFeedbackSchema.keys({
  analysis: FeedbackAnalysisSchema
}).unknown().required();

// currently only 1 tier
var AccountSettingPostBodySchema = exports.AccountSettingPostBodySchema = _joiBrowser2.default.object({
  twitterSearches: _joiBrowser2.default.array().items(_joiBrowser2.default.string()).required()
}).unknown().required();

var AccountSettingSchema = exports.AccountSettingSchema = _joiBrowser2.default.object(_extends({}, ModelSavedFieldsSchema, {
  feedbackUsageByDate: _joiBrowser2.default.object().pattern(_YearMonthBucket.YearMonthBucketRegex, _joiBrowser2.default.number().min(0).required()).required(),
  id: _joiBrowser2.default.string().required(),
  tier: _joiBrowser2.default.string().valid(['free']).required(),
  twitterSearches: _joiBrowser2.default.array().items(_joiBrowser2.default.string()).default(function () {
    return [];
  }, 'Do not allow undefined or null to come out of the DB')
})).unknown().required();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJNb2RlbFNhdmVkRmllbGRzU2NoZW1hIiwiYWNjb3VudElkIiwic3RyaW5nIiwicmVxdWlyZWQiLCJjcmVhdGVkQXQiLCJkYXRlIiwiaXNvIiwiaWQiLCJndWlkIiwiZGVmYXVsdCIsInY0IiwidXBkYXRlZEF0IiwiU3VwcG9ydGVkTGFuZ3VhZ2VTY2hlbWEiLCJ2YWxpZCIsIlRleHRTcGFuU2NoZW1hIiwib2JqZWN0IiwiYmVnaW5PZmZzZXQiLCJudW1iZXIiLCJtaW4iLCJjb250ZW50IiwidW5rbm93biIsIlNlbnRpbWVudFNjaGVtYSIsIm1hZ25pdHVkZSIsInNjb3JlIiwibWF4IiwiQ2xhc3NTY2hlbWEiLCJjbGFzc05hbWUiLCJjb25maWRlbmNlIiwiU2VudGVuY2VTY2hlbWEiLCJzZW50aW1lbnQiLCJ0ZXh0IiwiU2VudGltZW50QW5hbHlzaXNSZXNwb25zZVNjaGVtYSIsImRvY3VtZW50U2VudGltZW50IiwibGFuZ3VhZ2UiLCJzZW50ZW5jZXMiLCJhcnJheSIsIml0ZW1zIiwiRmVlZGJhY2tBbmFseXNpc1NjaGVtYSIsImNvbnRlbnRTZW50aW1lbnQiLCJkb2N1bWVudENsYXNzaWZpY2F0aW9uIiwiZmVlZGJhY2tJZCIsImZlZWRiYWNrVHlwZSIsImFsbG93Iiwia2V5cyIsImNsYXNzaWZpY2F0aW9uIiwidG9wRG9jdW1lbnRDbGFzc2VzIiwidG9wU2VudGVuY2VDbGFzc2VzIiwiV2F0c29uQ2xhc3NpZnlSZXNwb25zZVNjaGVtYSIsImNsYXNzZXMiLCJjbGFzc19uYW1lIiwiY2xhc3NpZmllcl9pZCIsInRvcF9jbGFzcyIsInVybCIsInVyaSIsImFsbG93UmVsYXRpdmUiLCJFbWFpbEZlZWRiYWNrUG9zdEJvZHlTY2hlbWEiLCJlbWFpbFNlbnREYXRlIiwiaXNvRGF0ZSIsImZyb20iLCJlbWFpbCIsInN1YmplY3QiLCJ0byIsIkVtYWlsRmVlZGJhY2tTY2hlbWEiLCJFbWFpbEZlZWRiYWNrV2l0aE1heWJlQW5hbHlzaXNTY2hlbWEiLCJhbmFseXNpcyIsIlR3aXR0ZXJGZWVkYmFja1NjaGVtYSIsInN0YXR1c0lkIiwiVHdpdHRlckZlZWRiYWNrV2l0aE1heWJlQW5hbHlzaXNTY2hlbWEiLCJBY2NvdW50U2V0dGluZ1Bvc3RCb2R5U2NoZW1hIiwidHdpdHRlclNlYXJjaGVzIiwiQWNjb3VudFNldHRpbmdTY2hlbWEiLCJmZWVkYmFja1VzYWdlQnlEYXRlIiwicGF0dGVybiIsInRpZXIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUtBO0FBQ0E7OztBQUpBOzs7O0FBQ0E7Ozs7QUFJQTs7OztBQUlBOztBQVNBLElBQU1BLHlCQUF5QjtBQUM3QkMsYUFBVyxxQkFBSUMsTUFBSixHQUFhQyxRQUFiLEVBRGtCO0FBRTdCQyxhQUFXLHFCQUFJQyxJQUFKLEdBQ1JDLEdBRFEsR0FFUkgsUUFGUSxFQUZrQjtBQUs3QkksTUFBSSxxQkFBSUwsTUFBSixHQUNETSxJQURDLEdBRURDLE9BRkMsQ0FFTztBQUFBLFdBQU0sZUFBS0MsRUFBTCxFQUFOO0FBQUEsR0FGUCxFQUV3QixTQUZ4QixDQUx5QjtBQVE3QkMsYUFBVyxxQkFBSU4sSUFBSixHQUFXQyxHQUFYO0FBUmtCLENBQS9COztBQXVCTyxJQUFNTSw0REFBMEIscUJBQUlWLE1BQUosR0FBYVcsS0FBYixDQUFtQixDQUN4RCxJQUR3RCxFQUV4RCxTQUZ3RCxFQUd4RCxJQUh3RCxFQUl4RCxJQUp3RCxFQUt4RCxJQUx3RCxFQU14RCxJQU53RCxFQU94RCxJQVB3RCxFQVF4RCxJQVJ3RCxFQVN4RCxJQVR3RCxFQVV4RCxJQVZ3RCxDQUFuQixDQUFoQzs7QUFrQkEsSUFBTUMsMENBQWlCLHFCQUFJQyxNQUFKLENBQVc7QUFDdkNDLGVBQWEscUJBQUlDLE1BQUosR0FDVkMsR0FEVSxDQUNOLENBQUMsQ0FESyxFQUVWZixRQUZVLEVBRDBCO0FBSXZDZ0IsV0FBUyxxQkFBSWpCLE1BQUosR0FBYUMsUUFBYjtBQUo4QixDQUFYLEVBSzNCaUIsT0FMMkIsRUFBdkI7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QStCLHFCQUFJckQsTUFBSixDQUFXO0FBQ3JEc0QsbUJBQWlCLHFCQUFJbEMsS0FBSixHQUNkQyxLQURjLENBQ1IscUJBQUlsQyxNQUFKLEVBRFEsRUFFZEMsUUFGYztBQURvQyxDQUFYLEVBS3pDaUIsT0FMeUMsR0FNekNqQixRQU55QyxFQUFyQzs7QUFzQkEsSUFBTW1FLHNEQUF1QixxQkFBSXZELE1BQUosY0FDL0JmLHNCQUQrQjtBQUVsQ3VFLHVCQUFxQixxQkFBSXhELE1BQUosR0FDbEJ5RCxPQURrQix3Q0FHakIscUJBQUl2RCxNQUFKLEdBQ0dDLEdBREgsQ0FDTyxDQURQLEVBRUdmLFFBRkgsRUFIaUIsRUFPbEJBLFFBUGtCLEVBRmE7QUFVbENJLE1BQUkscUJBQUlMLE1BQUosR0FBYUMsUUFBYixFQVY4QjtBQVdsQ3NFLFFBQU0scUJBQUl2RSxNQUFKLEdBQ0hXLEtBREcsQ0FDRyxDQUFDLE1BQUQsQ0FESCxFQUVIVixRQUZHLEVBWDRCO0FBY2xDa0UsbUJBQWlCLHFCQUFJbEMsS0FBSixHQUNkQyxLQURjLENBQ1IscUJBQUlsQyxNQUFKLEVBRFEsRUFFZE8sT0FGYyxDQUVOO0FBQUEsV0FBTSxFQUFOO0FBQUEsR0FGTSxFQUVJLHNEQUZKO0FBZGlCLElBa0JqQ1csT0FsQmlDLEdBbUJqQ2pCLFFBbkJpQyxFQUE3QiIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEBmbG93XG5cbmltcG9ydCBKb2kgZnJvbSAnam9pLWJyb3dzZXInO1xuaW1wb3J0IHV1aWQgZnJvbSAndXVpZCc7XG5cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9iZW5tb3NoZXIvZXNsaW50LXBsdWdpbi1pbXBvcnQvaXNzdWVzLzkyMVxuLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L25hbWVkICovXG5pbXBvcnQge1xuICBZZWFyTW9udGhCdWNrZXRSZWdleCxcbiAgdHlwZSBZZWFyTW9udGhCdWNrZXRUeXBlLFxufSBmcm9tICcuL1llYXJNb250aEJ1Y2tldCc7XG4vKiBlc2xpbnQtZW5hYmxlICovXG5cbmV4cG9ydCB0eXBlIE1vZGVsU2F2ZWRGaWVsZHNUeXBlID0ge3xcbiAgYWNjb3VudElkOiBzdHJpbmcsXG4gIGNyZWF0ZWRBdDogc3RyaW5nLFxuICBpZDogc3RyaW5nLFxuICB1cGRhdGVkQXQ/OiBzdHJpbmcsXG58fTtcblxuY29uc3QgTW9kZWxTYXZlZEZpZWxkc1NjaGVtYSA9IHtcbiAgYWNjb3VudElkOiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKSxcbiAgY3JlYXRlZEF0OiBKb2kuZGF0ZSgpXG4gICAgLmlzbygpXG4gICAgLnJlcXVpcmVkKCksXG4gIGlkOiBKb2kuc3RyaW5nKClcbiAgICAuZ3VpZCgpXG4gICAgLmRlZmF1bHQoKCkgPT4gdXVpZC52NCgpLCAndXVpZCB2NCcpLFxuICB1cGRhdGVkQXQ6IEpvaS5kYXRlKCkuaXNvKCksXG59O1xuXG5leHBvcnQgdHlwZSBTdXBwb3J0ZWRMYW5ndWFnZVR5cGUgPVxuICB8ICd6aCdcbiAgfCAnemgtSGFudCdcbiAgfCAnZW4nXG4gIHwgJ2ZyJ1xuICB8ICdkZSdcbiAgfCAnaXQnXG4gIHwgJ2phJ1xuICB8ICdrbydcbiAgfCAncHQnXG4gIHwgJ2VzJztcblxuZXhwb3J0IGNvbnN0IFN1cHBvcnRlZExhbmd1YWdlU2NoZW1hID0gSm9pLnN0cmluZygpLnZhbGlkKFtcbiAgJ3poJyxcbiAgJ3poLUhhbnQnLFxuICAnZW4nLFxuICAnZnInLFxuICAnZGUnLFxuICAnaXQnLFxuICAnamEnLFxuICAna28nLFxuICAncHQnLFxuICAnZXMnLFxuXSk7XG5cbnR5cGUgVGV4dFNwYW5UeXBlID0ge1xuICBiZWdpbk9mZnNldDogbnVtYmVyLFxuICBjb250ZW50OiBzdHJpbmcsXG59O1xuXG5leHBvcnQgY29uc3QgVGV4dFNwYW5TY2hlbWEgPSBKb2kub2JqZWN0KHtcbiAgYmVnaW5PZmZzZXQ6IEpvaS5udW1iZXIoKVxuICAgIC5taW4oLTEpXG4gICAgLnJlcXVpcmVkKCksXG4gIGNvbnRlbnQ6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxufSkudW5rbm93bigpO1xuXG5leHBvcnQgdHlwZSBTZW50aW1lbnRUeXBlID0ge1xuICBtYWduaXR1ZGU6IG51bWJlcixcbiAgc2NvcmU6IG51bWJlcixcbn07XG5cbmV4cG9ydCBjb25zdCBTZW50aW1lbnRTY2hlbWEgPSBKb2kub2JqZWN0KHtcbiAgbWFnbml0dWRlOiBKb2kubnVtYmVyKClcbiAgICAubWluKDApXG4gICAgLnJlcXVpcmVkKCksXG4gIHNjb3JlOiBKb2kubnVtYmVyKClcbiAgICAubWluKC0xKVxuICAgIC5tYXgoMSlcbiAgICAucmVxdWlyZWQoKSxcbn0pLnVua25vd24oKTtcblxuZXhwb3J0IHR5cGUgQ2xhc3NUeXBlID0ge1xuICBjbGFzc05hbWU6IHN0cmluZyxcbiAgY29uZmlkZW5jZTogbnVtYmVyLFxufTtcblxuZXhwb3J0IGNvbnN0IENsYXNzU2NoZW1hID0gSm9pLm9iamVjdCh7XG4gIGNsYXNzTmFtZTogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIGNvbmZpZGVuY2U6IEpvaS5udW1iZXIoKVxuICAgIC5taW4oMClcbiAgICAubWF4KDEpXG4gICAgLnJlcXVpcmVkKCksXG59KS51bmtub3duKCk7XG5cbmV4cG9ydCB0eXBlIFNlbnRlbmNlVHlwZSA9IHtcbiAgc2VudGltZW50OiBTZW50aW1lbnRUeXBlLFxuICB0ZXh0OiBUZXh0U3BhblR5cGUsXG59O1xuXG5leHBvcnQgY29uc3QgU2VudGVuY2VTY2hlbWEgPSBKb2kub2JqZWN0KHtcbiAgc2VudGltZW50OiBTZW50aW1lbnRTY2hlbWEucmVxdWlyZWQoKSxcbiAgdGV4dDogVGV4dFNwYW5TY2hlbWEucmVxdWlyZWQoKSxcbn0pLnVua25vd24oKTtcblxuZXhwb3J0IHR5cGUgU2VudGltZW50QW5hbHlzaXNSZXNwb25zZVR5cGUgPSB7fFxuICBkb2N1bWVudFNlbnRpbWVudDogU2VudGltZW50VHlwZSxcbiAgbGFuZ3VhZ2U6IFN1cHBvcnRlZExhbmd1YWdlVHlwZSxcbiAgc2VudGVuY2VzOiBTZW50ZW5jZVR5cGVbXSxcbnx9O1xuXG5leHBvcnQgY29uc3QgU2VudGltZW50QW5hbHlzaXNSZXNwb25zZVNjaGVtYSA9IEpvaS5vYmplY3Qoe1xuICBkb2N1bWVudFNlbnRpbWVudDogU2VudGltZW50U2NoZW1hLnJlcXVpcmVkKCksXG4gIGxhbmd1YWdlOiBTdXBwb3J0ZWRMYW5ndWFnZVNjaGVtYS5yZXF1aXJlZCgpLFxuICBzZW50ZW5jZXM6IEpvaS5hcnJheSgpXG4gICAgLml0ZW1zKFNlbnRlbmNlU2NoZW1hKVxuICAgIC5yZXF1aXJlZCgpLFxufSkudW5rbm93bigpO1xuXG5leHBvcnQgdHlwZSBGZWVkYmFja1R5cGUgPSAnZW1haWwnIHwgJ3R3aXR0ZXInO1xuXG5leHBvcnQgdHlwZSBGZWVkYmFja1NlbnRpbWVudEFuZENsYXNzaWZpY2F0aW9uVHlwZSA9IHt8XG4gIGNvbnRlbnRTZW50aW1lbnQ6IFNlbnRpbWVudFR5cGUsXG4gIGRvY3VtZW50Q2xhc3NpZmljYXRpb246IENsYXNzVHlwZVtdLFxuICBzZW50ZW5jZXM6IEFycmF5PHtcbiAgICBjbGFzc2lmaWNhdGlvbjogQ2xhc3NUeXBlLFxuICAgIC4uLlNlbnRlbmNlVHlwZSxcbiAgfT4sXG4gIHRvcERvY3VtZW50Q2xhc3NlczogQXJyYXk8c3RyaW5nPixcbiAgdG9wU2VudGVuY2VDbGFzc2VzOiBBcnJheTxzdHJpbmc+LFxufH07XG5cbmV4cG9ydCB0eXBlIEZlZWRiYWNrQW5hbHlzaXNVbnNhdmVkVHlwZSA9IHt8XG4gIC4uLkZlZWRiYWNrU2VudGltZW50QW5kQ2xhc3NpZmljYXRpb25UeXBlLFxuICBhY2NvdW50SWQ6IHN0cmluZyxcbiAgZmVlZGJhY2tJZDogc3RyaW5nLFxuICBmZWVkYmFja1R5cGU6IEZlZWRiYWNrVHlwZSxcbnx9O1xuXG5leHBvcnQgdHlwZSBGZWVkYmFja0FuYWx5c2lzVHlwZSA9IHtcbiAgLi4uRmVlZGJhY2tBbmFseXNpc1Vuc2F2ZWRUeXBlLFxuICAuLi5Nb2RlbFNhdmVkRmllbGRzVHlwZSxcbn07XG5cbmV4cG9ydCBjb25zdCBGZWVkYmFja0FuYWx5c2lzU2NoZW1hID0gSm9pLm9iamVjdCh7XG4gIC4uLk1vZGVsU2F2ZWRGaWVsZHNTY2hlbWEsXG4gIGNvbnRlbnRTZW50aW1lbnQ6IFNlbnRpbWVudFNjaGVtYS5yZXF1aXJlZCgpLFxuICBkb2N1bWVudENsYXNzaWZpY2F0aW9uOiBKb2kuYXJyYXkoKVxuICAgIC5pdGVtcyhDbGFzc1NjaGVtYSlcbiAgICAucmVxdWlyZWQoKSxcbiAgZmVlZGJhY2tJZDogSm9pLnN0cmluZygpXG4gICAgLmd1aWQoKVxuICAgIC5kZWZhdWx0KCgpID0+IHV1aWQudjQoKSwgJ3V1aWQgdjQnKSxcbiAgZmVlZGJhY2tUeXBlOiBKb2kuc3RyaW5nKClcbiAgICAuYWxsb3coWydlbWFpbCcsICd0d2l0dGVyJ10pXG4gICAgLnJlcXVpcmVkKCksXG4gIHNlbnRlbmNlczogSm9pLmFycmF5KClcbiAgICAuaXRlbXMoXG4gICAgICBTZW50ZW5jZVNjaGVtYS5rZXlzKHtcbiAgICAgICAgY2xhc3NpZmljYXRpb246IEpvaS5hcnJheSgpXG4gICAgICAgICAgLml0ZW1zKENsYXNzU2NoZW1hKVxuICAgICAgICAgIC5yZXF1aXJlZCgpLFxuICAgICAgfSkucmVxdWlyZWQoKVxuICAgIClcbiAgICAucmVxdWlyZWQoKSxcbiAgdG9wRG9jdW1lbnRDbGFzc2VzOiBKb2kuYXJyYXkoKVxuICAgIC5pdGVtcyhKb2kuc3RyaW5nKCkpXG4gICAgLnJlcXVpcmVkKCksXG4gIHRvcFNlbnRlbmNlQ2xhc3NlczogSm9pLmFycmF5KClcbiAgICAuaXRlbXMoSm9pLnN0cmluZygpKVxuICAgIC5yZXF1aXJlZCgpLFxufSlcbiAgLnVua25vd24oKVxuICAucmVxdWlyZWQoKTtcblxuZXhwb3J0IHR5cGUgV2F0c29uQ2xhc3NpZnlSZXNwb25zZVR5cGUgPSB7XG4gIGNsYXNzZXM6IEFycmF5PHsgY2xhc3NfbmFtZTogc3RyaW5nLCBjb25maWRlbmNlOiBudW1iZXIgfT4sXG4gIGNsYXNzaWZpZXJfaWQ6IHN0cmluZyxcbiAgdGV4dDogc3RyaW5nLFxuICB0b3BfY2xhc3M6IHN0cmluZyxcbiAgdXJsOiBzdHJpbmcsXG59O1xuXG5leHBvcnQgY29uc3QgV2F0c29uQ2xhc3NpZnlSZXNwb25zZVNjaGVtYSA9IEpvaS5vYmplY3Qoe1xuICBjbGFzc2VzOiBKb2kuYXJyYXkoKVxuICAgIC5pdGVtcyhcbiAgICAgIEpvaS5vYmplY3Qoe1xuICAgICAgICBjbGFzc19uYW1lOiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKSxcbiAgICAgICAgY29uZmlkZW5jZTogSm9pLm51bWJlcigpXG4gICAgICAgICAgLm1pbigwKVxuICAgICAgICAgIC5tYXgoMSlcbiAgICAgICAgICAucmVxdWlyZWQoKSxcbiAgICAgIH0pLnVua25vd24oKVxuICAgIClcbiAgICAucmVxdWlyZWQoKSxcbiAgY2xhc3NpZmllcl9pZDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIHRleHQ6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICB0b3BfY2xhc3M6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICB1cmw6IEpvaS5zdHJpbmcoKVxuICAgIC51cmkoeyBhbGxvd1JlbGF0aXZlOiB0cnVlIH0pXG4gICAgLnJlcXVpcmVkKCksXG59KTtcblxuZXhwb3J0IHR5cGUgRW1haWxGZWVkYmFja1Bvc3RCb2R5VHlwZSA9IHt8XG4gIGNvbnRlbnQ6IHN0cmluZyxcbiAgZW1haWxTZW50RGF0ZTogc3RyaW5nLFxuICBmcm9tOiBzdHJpbmcsXG4gIHN1YmplY3Q6IHN0cmluZyxcbiAgdG86IHN0cmluZyxcbnx9O1xuXG5leHBvcnQgY29uc3QgRW1haWxGZWVkYmFja1Bvc3RCb2R5U2NoZW1hID0gSm9pLm9iamVjdCh7XG4gIGNvbnRlbnQ6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICBlbWFpbFNlbnREYXRlOiBKb2kuc3RyaW5nKClcbiAgICAuaXNvRGF0ZSgpXG4gICAgLnJlcXVpcmVkKCksXG4gIGZyb206IEpvaS5zdHJpbmcoKVxuICAgIC5lbWFpbCgpXG4gICAgLnJlcXVpcmVkKCksXG4gIHN1YmplY3Q6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICB0bzogSm9pLnN0cmluZygpXG4gICAgLmVtYWlsKClcbiAgICAucmVxdWlyZWQoKSxcbn0pXG4gIC51bmtub3duKClcbiAgLnJlcXVpcmVkKCk7XG5cbmV4cG9ydCB0eXBlIEVtYWlsRmVlZGJhY2tVbnNhdmVkVHlwZSA9IHt8XG4gIC4uLkVtYWlsRmVlZGJhY2tQb3N0Qm9keVR5cGUsXG4gIGFjY291bnRJZDogc3RyaW5nLFxufH07XG5cbmV4cG9ydCB0eXBlIEVtYWlsRmVlZGJhY2tUeXBlID0ge1xuICAuLi5FbWFpbEZlZWRiYWNrVW5zYXZlZFR5cGUsXG4gIC4uLk1vZGVsU2F2ZWRGaWVsZHNUeXBlLFxufTtcblxuZXhwb3J0IGNvbnN0IEVtYWlsRmVlZGJhY2tTY2hlbWEgPSBFbWFpbEZlZWRiYWNrUG9zdEJvZHlTY2hlbWEua2V5cyh7XG4gIC4uLk1vZGVsU2F2ZWRGaWVsZHNTY2hlbWEsXG59KVxuICAudW5rbm93bigpXG4gIC5yZXF1aXJlZCgpO1xuXG5leHBvcnQgdHlwZSBFbWFpbEZlZWRiYWNrV2l0aE1heWJlQW5hbHlzaXNUeXBlID0ge1xuICAuLi5FbWFpbEZlZWRiYWNrVHlwZSxcbiAgYW5hbHlzaXM6ID9GZWVkYmFja0FuYWx5c2lzVHlwZSxcbn07XG5cbmV4cG9ydCBjb25zdCBFbWFpbEZlZWRiYWNrV2l0aE1heWJlQW5hbHlzaXNTY2hlbWEgPSBFbWFpbEZlZWRiYWNrU2NoZW1hLmtleXMoe1xuICBhbmFseXNpczogRmVlZGJhY2tBbmFseXNpc1NjaGVtYSxcbn0pXG4gIC51bmtub3duKClcbiAgLnJlcXVpcmVkKCk7XG5cbmV4cG9ydCB0eXBlIFR3aXR0ZXJGZWVkYmFja1Vuc2F2ZWRUeXBlID0ge3xcbiAgYWNjb3VudElkOiBzdHJpbmcsXG4gIHN0YXR1c0lkOiBzdHJpbmcsXG58fTtcblxuZXhwb3J0IHR5cGUgVHdpdHRlckZlZWRiYWNrVHlwZSA9IHtcbiAgLi4uVHdpdHRlckZlZWRiYWNrVW5zYXZlZFR5cGUsXG4gIC4uLk1vZGVsU2F2ZWRGaWVsZHNUeXBlLFxufTtcblxuZXhwb3J0IGNvbnN0IFR3aXR0ZXJGZWVkYmFja1NjaGVtYSA9IEpvaS5vYmplY3Qoe1xuICAuLi5Nb2RlbFNhdmVkRmllbGRzU2NoZW1hLFxuICBzdGF0dXNJZDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG59KVxuICAudW5rbm93bigpXG4gIC5yZXF1aXJlZCgpO1xuXG5leHBvcnQgdHlwZSBUd2l0dGVyRmVlZGJhY2tXaXRoTWF5YmVBbmFseXNpc1R5cGUgPSB7XG4gIC4uLlR3aXR0ZXJGZWVkYmFja1R5cGUsXG4gIGFuYWx5c2lzOiA/RmVlZGJhY2tBbmFseXNpc1R5cGUsXG59O1xuXG5leHBvcnQgY29uc3QgVHdpdHRlckZlZWRiYWNrV2l0aE1heWJlQW5hbHlzaXNTY2hlbWEgPSBUd2l0dGVyRmVlZGJhY2tTY2hlbWEua2V5cyhcbiAge1xuICAgIGFuYWx5c2lzOiBGZWVkYmFja0FuYWx5c2lzU2NoZW1hLFxuICB9XG4pXG4gIC51bmtub3duKClcbiAgLnJlcXVpcmVkKCk7XG5cbi8vIGN1cnJlbnRseSBvbmx5IDEgdGllclxuZXhwb3J0IHR5cGUgQWNjb3VudFRpZXJUeXBlID0gJ2ZyZWUnO1xuXG5leHBvcnQgdHlwZSBBY2NvdW50U2V0dGluZ1Bvc3RCb2R5VHlwZSA9IHt8XG4gIHR3aXR0ZXJTZWFyY2hlczogc3RyaW5nW10sXG58fTtcblxuZXhwb3J0IGNvbnN0IEFjY291bnRTZXR0aW5nUG9zdEJvZHlTY2hlbWEgPSBKb2kub2JqZWN0KHtcbiAgdHdpdHRlclNlYXJjaGVzOiBKb2kuYXJyYXkoKVxuICAgIC5pdGVtcyhKb2kuc3RyaW5nKCkpXG4gICAgLnJlcXVpcmVkKCksXG59KVxuICAudW5rbm93bigpXG4gIC5yZXF1aXJlZCgpO1xuXG5leHBvcnQgdHlwZSBBY2NvdW50U2V0dGluZ1Vuc2F2ZWRUeXBlID0ge3xcbiAgLi4uQWNjb3VudFNldHRpbmdQb3N0Qm9keVR5cGUsXG4gIGFjY291bnRJZDogc3RyaW5nLFxuICBmZWVkYmFja1VzYWdlQnlEYXRlOiB7XG4gICAgW2tleTogWWVhck1vbnRoQnVja2V0VHlwZV06IG51bWJlcixcbiAgfSxcbiAgdGllcjogQWNjb3VudFRpZXJUeXBlLFxufH07XG5cbmV4cG9ydCB0eXBlIEFjY291bnRTZXR0aW5nVHlwZSA9IHtcbiAgLi4uQWNjb3VudFNldHRpbmdVbnNhdmVkVHlwZSxcbiAgLi4uTW9kZWxTYXZlZEZpZWxkc1R5cGUsXG59O1xuXG5leHBvcnQgY29uc3QgQWNjb3VudFNldHRpbmdTY2hlbWEgPSBKb2kub2JqZWN0KHtcbiAgLi4uTW9kZWxTYXZlZEZpZWxkc1NjaGVtYSxcbiAgZmVlZGJhY2tVc2FnZUJ5RGF0ZTogSm9pLm9iamVjdCgpXG4gICAgLnBhdHRlcm4oXG4gICAgICBZZWFyTW9udGhCdWNrZXRSZWdleCxcbiAgICAgIEpvaS5udW1iZXIoKVxuICAgICAgICAubWluKDApXG4gICAgICAgIC5yZXF1aXJlZCgpXG4gICAgKVxuICAgIC5yZXF1aXJlZCgpLFxuICBpZDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIHRpZXI6IEpvaS5zdHJpbmcoKVxuICAgIC52YWxpZChbJ2ZyZWUnXSlcbiAgICAucmVxdWlyZWQoKSxcbiAgdHdpdHRlclNlYXJjaGVzOiBKb2kuYXJyYXkoKVxuICAgIC5pdGVtcyhKb2kuc3RyaW5nKCkpXG4gICAgLmRlZmF1bHQoKCkgPT4gW10sICdEbyBub3QgYWxsb3cgdW5kZWZpbmVkIG9yIG51bGwgdG8gY29tZSBvdXQgb2YgdGhlIERCJyksXG59KVxuICAudW5rbm93bigpXG4gIC5yZXF1aXJlZCgpO1xuIl19