'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.AccountSettingSchema = exports.AccountSettingPostBodySchema = exports.TwitterFeedbackWithMaybeAnalysisSchema = exports.TwitterFeedbackSchema = exports.EmailFeedbackWithMaybeAnalysisSchema = exports.EmailFeedbackSchema = exports.EmailFeedbackPostBodySchema = exports.WatsonClassifyResponseSchema = exports.FeedbackAnalysisSchema = exports.UserSchema = exports.EmailUserSchema = exports.TwitterUserSchema = exports.SentimentAnalysisResponseSchema = exports.SentenceSchema = exports.ClassSchema = exports.SentimentSchema = exports.TextSpanSchema = exports.SupportedLanguageSchema = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

// https://github.com/benmosher/eslint-plugin-import/issues/921
/* eslint-disable import/named */


var _joiBrowser = require('joi-browser');

var _joiBrowser2 = _interopRequireDefault(_joiBrowser);

var _uuid = require('uuid');

var _uuid2 = _interopRequireDefault(_uuid);

var _YearMonthBucket = require('./YearMonthBucket');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/* eslint-enable */

var ModelSavedFieldsSchema = {
  accountId: _joiBrowser2.default.string().required(),
  createdAt: _joiBrowser2.default.date().iso().required(),
  id: _joiBrowser2.default.string().guid().default(function () {
    return _uuid2.default.v4();
  }, 'uuid v4'),
  updatedAt: _joiBrowser2.default.date().iso()
};

var SupportedLanguageSchema = exports.SupportedLanguageSchema = _joiBrowser2.default.string().valid(['zh', 'zh-Hant', 'en', 'fr', 'de', 'it', 'ja', 'ko', 'pt', 'es']);

var TextSpanSchema = exports.TextSpanSchema = _joiBrowser2.default.object({
  beginOffset: _joiBrowser2.default.number().min(-1).required(),
  content: _joiBrowser2.default.string().required()
}).unknown();

var SentimentSchema = exports.SentimentSchema = _joiBrowser2.default.object({
  magnitude: _joiBrowser2.default.number().min(0).required(),
  score: _joiBrowser2.default.number().min(-1).max(1).required()
}).unknown();

var ClassSchema = exports.ClassSchema = _joiBrowser2.default.object({
  className: _joiBrowser2.default.string().required(),
  confidence: _joiBrowser2.default.number().min(0).max(1).required()
}).unknown();

var SentenceSchema = exports.SentenceSchema = _joiBrowser2.default.object({
  sentiment: SentimentSchema.required(),
  text: TextSpanSchema.required()
}).unknown();

var SentimentAnalysisResponseSchema = exports.SentimentAnalysisResponseSchema = _joiBrowser2.default.object({
  documentSentiment: SentimentSchema.required(),
  language: SupportedLanguageSchema.required(),
  sentences: _joiBrowser2.default.array().items(SentenceSchema).default(function () {
    return [];
  }, 'Do not allow undefined or null to come out of the DB')
}).unknown();

var TwitterUserSchema = exports.TwitterUserSchema = _joiBrowser2.default.object({
  avatarUrl: _joiBrowser2.default.string().uri().required(),
  id: _joiBrowser2.default.string().required(),
  username: _joiBrowser2.default.string().required()
}).unknown();

var EmailUserSchema = exports.EmailUserSchema = _joiBrowser2.default.object({
  id: _joiBrowser2.default.string().email().required()
}).unknown();

var UserSchema = exports.UserSchema = _joiBrowser2.default.compile([TwitterUserSchema, EmailUserSchema]);

var FeedbackAnalysisSchema = exports.FeedbackAnalysisSchema = _joiBrowser2.default.object(_extends({}, ModelSavedFieldsSchema, {
  contentSentiment: SentimentSchema.required(),
  documentClassification: _joiBrowser2.default.array().items(ClassSchema).default(function () {
    return [];
  }, 'Do not allow undefined or null to come out of the DB'),
  feedbackId: _joiBrowser2.default.string().guid().default(function () {
    return _uuid2.default.v4();
  }, 'uuid v4'),
  feedbackType: _joiBrowser2.default.string().allow(['email', 'twitter']).required(),
  sentences: _joiBrowser2.default.array().items(SentenceSchema.keys({
    classification: _joiBrowser2.default.array().items(ClassSchema).default(function () {
      return [];
    }, 'Do not allow undefined or null to come out of the DB')
  }).required()).default(function () {
    return [];
  }, 'Do not allow undefined or null to come out of the DB'),
  topDocumentClasses: _joiBrowser2.default.array().items(_joiBrowser2.default.string()).default(function () {
    return [];
  }, 'Do not allow undefined or null to come out of the DB'),
  topSentenceClasses: _joiBrowser2.default.array().items(_joiBrowser2.default.string()).default(function () {
    return [];
  }, 'Do not allow undefined or null to come out of the DB'),
  user: UserSchema,
  userId: _joiBrowser2.default.string().required()
})).unknown().required();

var WatsonClassifyResponseSchema = exports.WatsonClassifyResponseSchema = _joiBrowser2.default.object({
  classes: _joiBrowser2.default.array().items(_joiBrowser2.default.object({
    class_name: _joiBrowser2.default.string().required(),
    confidence: _joiBrowser2.default.number().min(0).max(1).required()
  }).unknown()).default(function () {
    return [];
  }, 'Do not allow undefined or null to come out of the DB'),
  classifier_id: _joiBrowser2.default.string().required(),
  text: _joiBrowser2.default.string().required(),
  top_class: _joiBrowser2.default.string().required(),
  url: _joiBrowser2.default.string().uri({ allowRelative: true }).required()
});

var EmailFeedbackPostBodySchema = exports.EmailFeedbackPostBodySchema = _joiBrowser2.default.object({
  content: _joiBrowser2.default.string().required(),
  emailSentDate: _joiBrowser2.default.string().isoDate().required(),
  from: _joiBrowser2.default.string().email().required(),
  subject: _joiBrowser2.default.string().required(),
  to: _joiBrowser2.default.string().email().required()
}).unknown().required();

var EmailFeedbackSchema = exports.EmailFeedbackSchema = EmailFeedbackPostBodySchema.keys(_extends({}, ModelSavedFieldsSchema)).unknown().required();

var EmailFeedbackWithMaybeAnalysisSchema = exports.EmailFeedbackWithMaybeAnalysisSchema = EmailFeedbackSchema.keys({
  analysis: FeedbackAnalysisSchema
}).unknown().required();

var TwitterFeedbackSchema = exports.TwitterFeedbackSchema = _joiBrowser2.default.object(_extends({}, ModelSavedFieldsSchema, {
  statusId: _joiBrowser2.default.string().required(),
  user: TwitterUserSchema.required()
})).unknown().required();

var TwitterFeedbackWithMaybeAnalysisSchema = exports.TwitterFeedbackWithMaybeAnalysisSchema = TwitterFeedbackSchema.keys({
  analysis: FeedbackAnalysisSchema
}).unknown().required();

// currently only 1 tier
var AccountSettingPostBodySchema = exports.AccountSettingPostBodySchema = _joiBrowser2.default.object({
  twitterSearches: _joiBrowser2.default.array().items(_joiBrowser2.default.string()).default(function () {
    return [];
  }, 'Do not allow undefined or null to come out of the DB')
}).unknown().required();

var AccountSettingSchema = exports.AccountSettingSchema = _joiBrowser2.default.object(_extends({}, ModelSavedFieldsSchema, {
  feedbackUsageByDate: _joiBrowser2.default.object().pattern(_YearMonthBucket.YearMonthBucketRegex, _joiBrowser2.default.number().min(0).required()).required(),
  id: _joiBrowser2.default.string().required(),
  tier: _joiBrowser2.default.string().valid(['free']).required(),
  twitterSearches: _joiBrowser2.default.array().items(_joiBrowser2.default.string()).default(function () {
    return [];
  }, 'Do not allow undefined or null to come out of the DB')
})).unknown().required();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJNb2RlbFNhdmVkRmllbGRzU2NoZW1hIiwiYWNjb3VudElkIiwic3RyaW5nIiwicmVxdWlyZWQiLCJjcmVhdGVkQXQiLCJkYXRlIiwiaXNvIiwiaWQiLCJndWlkIiwiZGVmYXVsdCIsInY0IiwidXBkYXRlZEF0IiwiU3VwcG9ydGVkTGFuZ3VhZ2VTY2hlbWEiLCJ2YWxpZCIsIlRleHRTcGFuU2NoZW1hIiwib2JqZWN0IiwiYmVnaW5PZmZzZXQiLCJudW1iZXIiLCJtaW4iLCJjb250ZW50IiwidW5rbm93biIsIlNlbnRpbWVudFNjaGVtYSIsIm1hZ25pdHVkZSIsInNjb3JlIiwibWF4IiwiQ2xhc3NTY2hlbWEiLCJjbGFzc05hbWUiLCJjb25maWRlbmNlIiwiU2VudGVuY2VTY2hlbWEiLCJzZW50aW1lbnQiLCJ0ZXh0IiwiU2VudGltZW50QW5hbHlzaXNSZXNwb25zZVNjaGVtYSIsImRvY3VtZW50U2VudGltZW50IiwibGFuZ3VhZ2UiLCJzZW50ZW5jZXMiLCJhcnJheSIsIml0ZW1zIiwiVHdpdHRlclVzZXJTY2hlbWEiLCJhdmF0YXJVcmwiLCJ1cmkiLCJ1c2VybmFtZSIsIkVtYWlsVXNlclNjaGVtYSIsImVtYWlsIiwiVXNlclNjaGVtYSIsImNvbXBpbGUiLCJGZWVkYmFja0FuYWx5c2lzU2NoZW1hIiwiY29udGVudFNlbnRpbWVudCIsImRvY3VtZW50Q2xhc3NpZmljYXRpb24iLCJmZWVkYmFja0lkIiwiZmVlZGJhY2tUeXBlIiwiYWxsb3ciLCJrZXlzIiwiY2xhc3NpZmljYXRpb24iLCJ0b3BEb2N1bWVudENsYXNzZXMiLCJ0b3BTZW50ZW5jZUNsYXNzZXMiLCJ1c2VyIiwidXNlcklkIiwiV2F0c29uQ2xhc3NpZnlSZXNwb25zZVNjaGVtYSIsImNsYXNzZXMiLCJjbGFzc19uYW1lIiwiY2xhc3NpZmllcl9pZCIsInRvcF9jbGFzcyIsInVybCIsImFsbG93UmVsYXRpdmUiLCJFbWFpbEZlZWRiYWNrUG9zdEJvZHlTY2hlbWEiLCJlbWFpbFNlbnREYXRlIiwiaXNvRGF0ZSIsImZyb20iLCJzdWJqZWN0IiwidG8iLCJFbWFpbEZlZWRiYWNrU2NoZW1hIiwiRW1haWxGZWVkYmFja1dpdGhNYXliZUFuYWx5c2lzU2NoZW1hIiwiYW5hbHlzaXMiLCJUd2l0dGVyRmVlZGJhY2tTY2hlbWEiLCJzdGF0dXNJZCIsIlR3aXR0ZXJGZWVkYmFja1dpdGhNYXliZUFuYWx5c2lzU2NoZW1hIiwiQWNjb3VudFNldHRpbmdQb3N0Qm9keVNjaGVtYSIsInR3aXR0ZXJTZWFyY2hlcyIsIkFjY291bnRTZXR0aW5nU2NoZW1hIiwiZmVlZGJhY2tVc2FnZUJ5RGF0ZSIsInBhdHRlcm4iLCJ0aWVyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFLQTtBQUNBOzs7QUFKQTs7OztBQUNBOzs7O0FBSUE7Ozs7QUFJQTs7QUFTQSxJQUFNQSx5QkFBeUI7QUFDN0JDLGFBQVcscUJBQUlDLE1BQUosR0FBYUMsUUFBYixFQURrQjtBQUU3QkMsYUFBVyxxQkFBSUMsSUFBSixHQUNSQyxHQURRLEdBRVJILFFBRlEsRUFGa0I7QUFLN0JJLE1BQUkscUJBQUlMLE1BQUosR0FDRE0sSUFEQyxHQUVEQyxPQUZDLENBRU87QUFBQSxXQUFNLGVBQUtDLEVBQUwsRUFBTjtBQUFBLEdBRlAsRUFFd0IsU0FGeEIsQ0FMeUI7QUFRN0JDLGFBQVcscUJBQUlOLElBQUosR0FBV0MsR0FBWDtBQVJrQixDQUEvQjs7QUF1Qk8sSUFBTU0sNERBQTBCLHFCQUFJVixNQUFKLEdBQWFXLEtBQWIsQ0FBbUIsQ0FDeEQsSUFEd0QsRUFFeEQsU0FGd0QsRUFHeEQsSUFId0QsRUFJeEQsSUFKd0QsRUFLeEQsSUFMd0QsRUFNeEQsSUFOd0QsRUFPeEQsSUFQd0QsRUFReEQsSUFSd0QsRUFTeEQsSUFUd0QsRUFVeEQsSUFWd0QsQ0FBbkIsQ0FBaEM7O0FBa0JBLElBQU1DLDBDQUFpQixxQkFBSUMsTUFBSixDQUFXO0FBQ3ZDQyxlQUFhLHFCQUFJQyxNQUFKLEdBQ1ZDLEdBRFUs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SixDQUFXO0FBQ3JEOEQsbUJBQWlCLHFCQUFJMUMsS0FBSixHQUNkQyxLQURjLENBQ1IscUJBQUlsQyxNQUFKLEVBRFEsRUFFZE8sT0FGYyxDQUVOO0FBQUEsV0FBTSxFQUFOO0FBQUEsR0FGTSxFQUVJLHNEQUZKO0FBRG9DLENBQVgsRUFLekNXLE9BTHlDLEdBTXpDakIsUUFOeUMsRUFBckM7O0FBc0JBLElBQU0yRSxzREFBdUIscUJBQUkvRCxNQUFKLGNBQy9CZixzQkFEK0I7QUFFbEMrRSx1QkFBcUIscUJBQUloRSxNQUFKLEdBQ2xCaUUsT0FEa0Isd0NBR2pCLHFCQUFJL0QsTUFBSixHQUNHQyxHQURILENBQ08sQ0FEUCxFQUVHZixRQUZILEVBSGlCLEVBT2xCQSxRQVBrQixFQUZhO0FBVWxDSSxNQUFJLHFCQUFJTCxNQUFKLEdBQWFDLFFBQWIsRUFWOEI7QUFXbEM4RSxRQUFNLHFCQUFJL0UsTUFBSixHQUNIVyxLQURHLENBQ0csQ0FBQyxNQUFELENBREgsRUFFSFYsUUFGRyxFQVg0QjtBQWNsQzBFLG1CQUFpQixxQkFBSTFDLEtBQUosR0FDZEMsS0FEYyxDQUNSLHFCQUFJbEMsTUFBSixFQURRLEVBRWRPLE9BRmMsQ0FFTjtBQUFBLFdBQU0sRUFBTjtBQUFBLEdBRk0sRUFFSSxzREFGSjtBQWRpQixJQWtCakNXLE9BbEJpQyxHQW1CakNqQixRQW5CaUMsRUFBN0IiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAZmxvd1xuXG5pbXBvcnQgSm9pIGZyb20gJ2pvaS1icm93c2VyJztcbmltcG9ydCB1dWlkIGZyb20gJ3V1aWQnO1xuXG4vLyBodHRwczovL2dpdGh1Yi5jb20vYmVubW9zaGVyL2VzbGludC1wbHVnaW4taW1wb3J0L2lzc3Vlcy85MjFcbi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9uYW1lZCAqL1xuaW1wb3J0IHtcbiAgWWVhck1vbnRoQnVja2V0UmVnZXgsXG4gIHR5cGUgWWVhck1vbnRoQnVja2V0VHlwZSxcbn0gZnJvbSAnLi9ZZWFyTW9udGhCdWNrZXQnO1xuLyogZXNsaW50LWVuYWJsZSAqL1xuXG5leHBvcnQgdHlwZSBNb2RlbFNhdmVkRmllbGRzVHlwZSA9IHt8XG4gIGFjY291bnRJZDogc3RyaW5nLFxuICBjcmVhdGVkQXQ6IHN0cmluZyxcbiAgaWQ6IHN0cmluZyxcbiAgdXBkYXRlZEF0Pzogc3RyaW5nLFxufH07XG5cbmNvbnN0IE1vZGVsU2F2ZWRGaWVsZHNTY2hlbWEgPSB7XG4gIGFjY291bnRJZDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIGNyZWF0ZWRBdDogSm9pLmRhdGUoKVxuICAgIC5pc28oKVxuICAgIC5yZXF1aXJlZCgpLFxuICBpZDogSm9pLnN0cmluZygpXG4gICAgLmd1aWQoKVxuICAgIC5kZWZhdWx0KCgpID0+IHV1aWQudjQoKSwgJ3V1aWQgdjQnKSxcbiAgdXBkYXRlZEF0OiBKb2kuZGF0ZSgpLmlzbygpLFxufTtcblxuZXhwb3J0IHR5cGUgU3VwcG9ydGVkTGFuZ3VhZ2VUeXBlID1cbiAgfCAnemgnXG4gIHwgJ3poLUhhbnQnXG4gIHwgJ2VuJ1xuICB8ICdmcidcbiAgfCAnZGUnXG4gIHwgJ2l0J1xuICB8ICdqYSdcbiAgfCAna28nXG4gIHwgJ3B0J1xuICB8ICdlcyc7XG5cbmV4cG9ydCBjb25zdCBTdXBwb3J0ZWRMYW5ndWFnZVNjaGVtYSA9IEpvaS5zdHJpbmcoKS52YWxpZChbXG4gICd6aCcsXG4gICd6aC1IYW50JyxcbiAgJ2VuJyxcbiAgJ2ZyJyxcbiAgJ2RlJyxcbiAgJ2l0JyxcbiAgJ2phJyxcbiAgJ2tvJyxcbiAgJ3B0JyxcbiAgJ2VzJyxcbl0pO1xuXG50eXBlIFRleHRTcGFuVHlwZSA9IHtcbiAgYmVnaW5PZmZzZXQ6IG51bWJlcixcbiAgY29udGVudDogc3RyaW5nLFxufTtcblxuZXhwb3J0IGNvbnN0IFRleHRTcGFuU2NoZW1hID0gSm9pLm9iamVjdCh7XG4gIGJlZ2luT2Zmc2V0OiBKb2kubnVtYmVyKClcbiAgICAubWluKC0xKVxuICAgIC5yZXF1aXJlZCgpLFxuICBjb250ZW50OiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKSxcbn0pLnVua25vd24oKTtcblxuZXhwb3J0IHR5cGUgU2VudGltZW50VHlwZSA9IHtcbiAgbWFnbml0dWRlOiBudW1iZXIsXG4gIHNjb3JlOiBudW1iZXIsXG59O1xuXG5leHBvcnQgY29uc3QgU2VudGltZW50U2NoZW1hID0gSm9pLm9iamVjdCh7XG4gIG1hZ25pdHVkZTogSm9pLm51bWJlcigpXG4gICAgLm1pbigwKVxuICAgIC5yZXF1aXJlZCgpLFxuICBzY29yZTogSm9pLm51bWJlcigpXG4gICAgLm1pbigtMSlcbiAgICAubWF4KDEpXG4gICAgLnJlcXVpcmVkKCksXG59KS51bmtub3duKCk7XG5cbmV4cG9ydCB0eXBlIENsYXNzVHlwZSA9IHtcbiAgY2xhc3NOYW1lOiBzdHJpbmcsXG4gIGNvbmZpZGVuY2U6IG51bWJlcixcbn07XG5cbmV4cG9ydCBjb25zdCBDbGFzc1NjaGVtYSA9IEpvaS5vYmplY3Qoe1xuICBjbGFzc05hbWU6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICBjb25maWRlbmNlOiBKb2kubnVtYmVyKClcbiAgICAubWluKDApXG4gICAgLm1heCgxKVxuICAgIC5yZXF1aXJlZCgpLFxufSkudW5rbm93bigpO1xuXG5leHBvcnQgdHlwZSBTZW50ZW5jZVR5cGUgPSB7XG4gIHNlbnRpbWVudDogU2VudGltZW50VHlwZSxcbiAgdGV4dDogVGV4dFNwYW5UeXBlLFxufTtcblxuZXhwb3J0IGNvbnN0IFNlbnRlbmNlU2NoZW1hID0gSm9pLm9iamVjdCh7XG4gIHNlbnRpbWVudDogU2VudGltZW50U2NoZW1hLnJlcXVpcmVkKCksXG4gIHRleHQ6IFRleHRTcGFuU2NoZW1hLnJlcXVpcmVkKCksXG59KS51bmtub3duKCk7XG5cbmV4cG9ydCB0eXBlIFNlbnRpbWVudEFuYWx5c2lzUmVzcG9uc2VUeXBlID0ge3xcbiAgZG9jdW1lbnRTZW50aW1lbnQ6IFNlbnRpbWVudFR5cGUsXG4gIGxhbmd1YWdlOiBTdXBwb3J0ZWRMYW5ndWFnZVR5cGUsXG4gIHNlbnRlbmNlczogU2VudGVuY2VUeXBlW10sXG58fTtcblxuZXhwb3J0IGNvbnN0IFNlbnRpbWVudEFuYWx5c2lzUmVzcG9uc2VTY2hlbWEgPSBKb2kub2JqZWN0KHtcbiAgZG9jdW1lbnRTZW50aW1lbnQ6IFNlbnRpbWVudFNjaGVtYS5yZXF1aXJlZCgpLFxuICBsYW5ndWFnZTogU3VwcG9ydGVkTGFuZ3VhZ2VTY2hlbWEucmVxdWlyZWQoKSxcbiAgc2VudGVuY2VzOiBKb2kuYXJyYXkoKVxuICAgIC5pdGVtcyhTZW50ZW5jZVNjaGVtYSlcbiAgICAuZGVmYXVsdCgoKSA9PiBbXSwgJ0RvIG5vdCBhbGxvdyB1bmRlZmluZWQgb3IgbnVsbCB0byBjb21lIG91dCBvZiB0aGUgREInKSxcbn0pLnVua25vd24oKTtcblxuZXhwb3J0IHR5cGUgRmVlZGJhY2tUeXBlID0gJ2VtYWlsJyB8ICd0d2l0dGVyJztcblxuZXhwb3J0IHR5cGUgVHdpdHRlclVzZXJUeXBlID0ge3xcbiAgYXZhdGFyVXJsOiBzdHJpbmcsXG4gIGlkOiBzdHJpbmcsXG4gIHVzZXJuYW1lOiBzdHJpbmcsXG58fTtcblxuZXhwb3J0IGNvbnN0IFR3aXR0ZXJVc2VyU2NoZW1hID0gSm9pLm9iamVjdCh7XG4gIGF2YXRhclVybDogSm9pLnN0cmluZygpXG4gICAgLnVyaSgpXG4gICAgLnJlcXVpcmVkKCksXG4gIGlkOiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKSxcbiAgdXNlcm5hbWU6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxufSkudW5rbm93bigpO1xuXG5leHBvcnQgdHlwZSBFbWFpbFVzZXJUeXBlID0ge3xcbiAgaWQ6IHN0cmluZyxcbnx9O1xuXG5leHBvcnQgY29uc3QgRW1haWxVc2VyU2NoZW1hID0gSm9pLm9iamVjdCh7XG4gIGlkOiBKb2kuc3RyaW5nKClcbiAgICAuZW1haWwoKVxuICAgIC5yZXF1aXJlZCgpLFxufSkudW5rbm93bigpO1xuXG5leHBvcnQgdHlwZSBVc2VyVHlwZSA9IEVtYWlsVXNlclR5cGUgfCBUd2l0dGVyVXNlclR5cGU7XG5cbmV4cG9ydCBjb25zdCBVc2VyU2NoZW1hID0gSm9pLmNvbXBpbGUoW1R3aXR0ZXJVc2VyU2NoZW1hLCBFbWFpbFVzZXJTY2hlbWFdKTtcblxuZXhwb3J0IHR5cGUgRmVlZGJhY2tTZW50aW1lbnRBbmRDbGFzc2lmaWNhdGlvblR5cGUgPSB7fFxuICBjb250ZW50U2VudGltZW50OiBTZW50aW1lbnRUeXBlLFxuICBkb2N1bWVudENsYXNzaWZpY2F0aW9uOiBDbGFzc1R5cGVbXSxcbiAgc2VudGVuY2VzOiBBcnJheTx7XG4gICAgY2xhc3NpZmljYXRpb246IENsYXNzVHlwZSxcbiAgICAuLi5TZW50ZW5jZVR5cGUsXG4gIH0+LFxuICB0b3BEb2N1bWVudENsYXNzZXM6IEFycmF5PHN0cmluZz4sXG4gIHRvcFNlbnRlbmNlQ2xhc3NlczogQXJyYXk8c3RyaW5nPixcbnx9O1xuXG5leHBvcnQgdHlwZSBGZWVkYmFja0FuYWx5c2lzVW5zYXZlZFR5cGUgPSB7fFxuICAuLi5GZWVkYmFja1NlbnRpbWVudEFuZENsYXNzaWZpY2F0aW9uVHlwZSxcbiAgYWNjb3VudElkOiBzdHJpbmcsXG4gIGZlZWRiYWNrSWQ6IHN0cmluZyxcbiAgZmVlZGJhY2tUeXBlOiBGZWVkYmFja1R5cGUsXG4gIHVzZXI6IFVzZXJUeXBlLFxuICB1c2VySWQ6IHN0cmluZyxcbnx9O1xuXG5leHBvcnQgdHlwZSBGZWVkYmFja0FuYWx5c2lzVHlwZSA9IHtcbiAgLi4uRmVlZGJhY2tBbmFseXNpc1Vuc2F2ZWRUeXBlLFxuICAuLi5Nb2RlbFNhdmVkRmllbGRzVHlwZSxcbn07XG5cbmV4cG9ydCBjb25zdCBGZWVkYmFja0FuYWx5c2lzU2NoZW1hID0gSm9pLm9iamVjdCh7XG4gIC4uLk1vZGVsU2F2ZWRGaWVsZHNTY2hlbWEsXG4gIGNvbnRlbnRTZW50aW1lbnQ6IFNlbnRpbWVudFNjaGVtYS5yZXF1aXJlZCgpLFxuICBkb2N1bWVudENsYXNzaWZpY2F0aW9uOiBKb2kuYXJyYXkoKVxuICAgIC5pdGVtcyhDbGFzc1NjaGVtYSlcbiAgICAuZGVmYXVsdCgoKSA9PiBbXSwgJ0RvIG5vdCBhbGxvdyB1bmRlZmluZWQgb3IgbnVsbCB0byBjb21lIG91dCBvZiB0aGUgREInKSxcbiAgZmVlZGJhY2tJZDogSm9pLnN0cmluZygpXG4gICAgLmd1aWQoKVxuICAgIC5kZWZhdWx0KCgpID0+IHV1aWQudjQoKSwgJ3V1aWQgdjQnKSxcbiAgZmVlZGJhY2tUeXBlOiBKb2kuc3RyaW5nKClcbiAgICAuYWxsb3coWydlbWFpbCcsICd0d2l0dGVyJ10pXG4gICAgLnJlcXVpcmVkKCksXG4gIHNlbnRlbmNlczogSm9pLmFycmF5KClcbiAgICAuaXRlbXMoXG4gICAgICBTZW50ZW5jZVNjaGVtYS5rZXlzKHtcbiAgICAgICAgY2xhc3NpZmljYXRpb246IEpvaS5hcnJheSgpXG4gICAgICAgICAgLml0ZW1zKENsYXNzU2NoZW1hKVxuICAgICAgICAgIC5kZWZhdWx0KFxuICAgICAgICAgICAgKCkgPT4gW10sXG4gICAgICAgICAgICAnRG8gbm90IGFsbG93IHVuZGVmaW5lZCBvciBudWxsIHRvIGNvbWUgb3V0IG9mIHRoZSBEQidcbiAgICAgICAgICApLFxuICAgICAgfSkucmVxdWlyZWQoKVxuICAgIClcbiAgICAuZGVmYXVsdCgoKSA9PiBbXSwgJ0RvIG5vdCBhbGxvdyB1bmRlZmluZWQgb3IgbnVsbCB0byBjb21lIG91dCBvZiB0aGUgREInKSxcbiAgdG9wRG9jdW1lbnRDbGFzc2VzOiBKb2kuYXJyYXkoKVxuICAgIC5pdGVtcyhKb2kuc3RyaW5nKCkpXG4gICAgLmRlZmF1bHQoKCkgPT4gW10sICdEbyBub3QgYWxsb3cgdW5kZWZpbmVkIG9yIG51bGwgdG8gY29tZSBvdXQgb2YgdGhlIERCJyksXG4gIHRvcFNlbnRlbmNlQ2xhc3NlczogSm9pLmFycmF5KClcbiAgICAuaXRlbXMoSm9pLnN0cmluZygpKVxuICAgIC5kZWZhdWx0KCgpID0+IFtdLCAnRG8gbm90IGFsbG93IHVuZGVmaW5lZCBvciBudWxsIHRvIGNvbWUgb3V0IG9mIHRoZSBEQicpLFxuICB1c2VyOiBVc2VyU2NoZW1hLFxuICB1c2VySWQ6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxufSlcbiAgLnVua25vd24oKVxuICAucmVxdWlyZWQoKTtcblxuZXhwb3J0IHR5cGUgV2F0c29uQ2xhc3NpZnlSZXNwb25zZVR5cGUgPSB7XG4gIGNsYXNzZXM6IEFycmF5PHsgY2xhc3NfbmFtZTogc3RyaW5nLCBjb25maWRlbmNlOiBudW1iZXIgfT4sXG4gIGNsYXNzaWZpZXJfaWQ6IHN0cmluZyxcbiAgdGV4dDogc3RyaW5nLFxuICB0b3BfY2xhc3M6IHN0cmluZyxcbiAgdXJsOiBzdHJpbmcsXG59O1xuXG5leHBvcnQgY29uc3QgV2F0c29uQ2xhc3NpZnlSZXNwb25zZVNjaGVtYSA9IEpvaS5vYmplY3Qoe1xuICBjbGFzc2VzOiBKb2kuYXJyYXkoKVxuICAgIC5pdGVtcyhcbiAgICAgIEpvaS5vYmplY3Qoe1xuICAgICAgICBjbGFzc19uYW1lOiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKSxcbiAgICAgICAgY29uZmlkZW5jZTogSm9pLm51bWJlcigpXG4gICAgICAgICAgLm1pbigwKVxuICAgICAgICAgIC5tYXgoMSlcbiAgICAgICAgICAucmVxdWlyZWQoKSxcbiAgICAgIH0pLnVua25vd24oKVxuICAgIClcbiAgICAuZGVmYXVsdCgoKSA9PiBbXSwgJ0RvIG5vdCBhbGxvdyB1bmRlZmluZWQgb3IgbnVsbCB0byBjb21lIG91dCBvZiB0aGUgREInKSxcbiAgY2xhc3NpZmllcl9pZDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIHRleHQ6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICB0b3BfY2xhc3M6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICB1cmw6IEpvaS5zdHJpbmcoKVxuICAgIC51cmkoeyBhbGxvd1JlbGF0aXZlOiB0cnVlIH0pXG4gICAgLnJlcXVpcmVkKCksXG59KTtcblxuZXhwb3J0IHR5cGUgRW1haWxGZWVkYmFja1Bvc3RCb2R5VHlwZSA9IHt8XG4gIGNvbnRlbnQ6IHN0cmluZyxcbiAgZW1haWxTZW50RGF0ZTogc3RyaW5nLFxuICBmcm9tOiBzdHJpbmcsXG4gIHN1YmplY3Q6IHN0cmluZyxcbiAgdG86IHN0cmluZyxcbnx9O1xuXG5leHBvcnQgY29uc3QgRW1haWxGZWVkYmFja1Bvc3RCb2R5U2NoZW1hID0gSm9pLm9iamVjdCh7XG4gIGNvbnRlbnQ6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICBlbWFpbFNlbnREYXRlOiBKb2kuc3RyaW5nKClcbiAgICAuaXNvRGF0ZSgpXG4gICAgLnJlcXVpcmVkKCksXG4gIGZyb206IEpvaS5zdHJpbmcoKVxuICAgIC5lbWFpbCgpXG4gICAgLnJlcXVpcmVkKCksXG4gIHN1YmplY3Q6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICB0bzogSm9pLnN0cmluZygpXG4gICAgLmVtYWlsKClcbiAgICAucmVxdWlyZWQoKSxcbn0pXG4gIC51bmtub3duKClcbiAgLnJlcXVpcmVkKCk7XG5cbmV4cG9ydCB0eXBlIEVtYWlsRmVlZGJhY2tVbnNhdmVkVHlwZSA9IHt8XG4gIC4uLkVtYWlsRmVlZGJhY2tQb3N0Qm9keVR5cGUsXG4gIGFjY291bnRJZDogc3RyaW5nLFxufH07XG5cbmV4cG9ydCB0eXBlIEVtYWlsRmVlZGJhY2tUeXBlID0ge1xuICAuLi5FbWFpbEZlZWRiYWNrVW5zYXZlZFR5cGUsXG4gIC4uLk1vZGVsU2F2ZWRGaWVsZHNUeXBlLFxufTtcblxuZXhwb3J0IGNvbnN0IEVtYWlsRmVlZGJhY2tTY2hlbWEgPSBFbWFpbEZlZWRiYWNrUG9zdEJvZHlTY2hlbWEua2V5cyh7XG4gIC4uLk1vZGVsU2F2ZWRGaWVsZHNTY2hlbWEsXG59KVxuICAudW5rbm93bigpXG4gIC5yZXF1aXJlZCgpO1xuXG5leHBvcnQgdHlwZSBFbWFpbEZlZWRiYWNrV2l0aE1heWJlQW5hbHlzaXNUeXBlID0ge1xuICAuLi5FbWFpbEZlZWRiYWNrVHlwZSxcbiAgYW5hbHlzaXM6ID9GZWVkYmFja0FuYWx5c2lzVHlwZSxcbn07XG5cbmV4cG9ydCBjb25zdCBFbWFpbEZlZWRiYWNrV2l0aE1heWJlQW5hbHlzaXNTY2hlbWEgPSBFbWFpbEZlZWRiYWNrU2NoZW1hLmtleXMoe1xuICBhbmFseXNpczogRmVlZGJhY2tBbmFseXNpc1NjaGVtYSxcbn0pXG4gIC51bmtub3duKClcbiAgLnJlcXVpcmVkKCk7XG5cbmV4cG9ydCB0eXBlIFR3aXR0ZXJGZWVkYmFja1Vuc2F2ZWRUeXBlID0ge3xcbiAgYWNjb3VudElkOiBzdHJpbmcsXG4gIHN0YXR1c0lkOiBzdHJpbmcsXG4gIHVzZXI6IFR3aXR0ZXJVc2VyVHlwZSxcbnx9O1xuXG5leHBvcnQgdHlwZSBUd2l0dGVyRmVlZGJhY2tUeXBlID0ge1xuICAuLi5Ud2l0dGVyRmVlZGJhY2tVbnNhdmVkVHlwZSxcbiAgLi4uTW9kZWxTYXZlZEZpZWxkc1R5cGUsXG59O1xuXG5leHBvcnQgY29uc3QgVHdpdHRlckZlZWRiYWNrU2NoZW1hID0gSm9pLm9iamVjdCh7XG4gIC4uLk1vZGVsU2F2ZWRGaWVsZHNTY2hlbWEsXG4gIHN0YXR1c0lkOiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKSxcbiAgdXNlcjogVHdpdHRlclVzZXJTY2hlbWEucmVxdWlyZWQoKSxcbn0pXG4gIC51bmtub3duKClcbiAgLnJlcXVpcmVkKCk7XG5cbmV4cG9ydCB0eXBlIFR3aXR0ZXJGZWVkYmFja1dpdGhNYXliZUFuYWx5c2lzVHlwZSA9IHtcbiAgLi4uVHdpdHRlckZlZWRiYWNrVHlwZSxcbiAgYW5hbHlzaXM6ID9GZWVkYmFja0FuYWx5c2lzVHlwZSxcbn07XG5cbmV4cG9ydCBjb25zdCBUd2l0dGVyRmVlZGJhY2tXaXRoTWF5YmVBbmFseXNpc1NjaGVtYSA9IFR3aXR0ZXJGZWVkYmFja1NjaGVtYS5rZXlzKFxuICB7XG4gICAgYW5hbHlzaXM6IEZlZWRiYWNrQW5hbHlzaXNTY2hlbWEsXG4gIH1cbilcbiAgLnVua25vd24oKVxuICAucmVxdWlyZWQoKTtcblxuLy8gY3VycmVudGx5IG9ubHkgMSB0aWVyXG5leHBvcnQgdHlwZSBBY2NvdW50VGllclR5cGUgPSAnZnJlZSc7XG5cbmV4cG9ydCB0eXBlIEFjY291bnRTZXR0aW5nUG9zdEJvZHlUeXBlID0ge3xcbiAgdHdpdHRlclNlYXJjaGVzOiBzdHJpbmdbXSxcbnx9O1xuXG5leHBvcnQgY29uc3QgQWNjb3VudFNldHRpbmdQb3N0Qm9keVNjaGVtYSA9IEpvaS5vYmplY3Qoe1xuICB0d2l0dGVyU2VhcmNoZXM6IEpvaS5hcnJheSgpXG4gICAgLml0ZW1zKEpvaS5zdHJpbmcoKSlcbiAgICAuZGVmYXVsdCgoKSA9PiBbXSwgJ0RvIG5vdCBhbGxvdyB1bmRlZmluZWQgb3IgbnVsbCB0byBjb21lIG91dCBvZiB0aGUgREInKSxcbn0pXG4gIC51bmtub3duKClcbiAgLnJlcXVpcmVkKCk7XG5cbmV4cG9ydCB0eXBlIEFjY291bnRTZXR0aW5nVW5zYXZlZFR5cGUgPSB7fFxuICAuLi5BY2NvdW50U2V0dGluZ1Bvc3RCb2R5VHlwZSxcbiAgYWNjb3VudElkOiBzdHJpbmcsXG4gIGZlZWRiYWNrVXNhZ2VCeURhdGU6IHtcbiAgICBba2V5OiBZZWFyTW9udGhCdWNrZXRUeXBlXTogbnVtYmVyLFxuICB9LFxuICB0aWVyOiBBY2NvdW50VGllclR5cGUsXG58fTtcblxuZXhwb3J0IHR5cGUgQWNjb3VudFNldHRpbmdUeXBlID0ge1xuICAuLi5BY2NvdW50U2V0dGluZ1Vuc2F2ZWRUeXBlLFxuICAuLi5Nb2RlbFNhdmVkRmllbGRzVHlwZSxcbn07XG5cbmV4cG9ydCBjb25zdCBBY2NvdW50U2V0dGluZ1NjaGVtYSA9IEpvaS5vYmplY3Qoe1xuICAuLi5Nb2RlbFNhdmVkRmllbGRzU2NoZW1hLFxuICBmZWVkYmFja1VzYWdlQnlEYXRlOiBKb2kub2JqZWN0KClcbiAgICAucGF0dGVybihcbiAgICAgIFllYXJNb250aEJ1Y2tldFJlZ2V4LFxuICAgICAgSm9pLm51bWJlcigpXG4gICAgICAgIC5taW4oMClcbiAgICAgICAgLnJlcXVpcmVkKClcbiAgICApXG4gICAgLnJlcXVpcmVkKCksXG4gIGlkOiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKSxcbiAgdGllcjogSm9pLnN0cmluZygpXG4gICAgLnZhbGlkKFsnZnJlZSddKVxuICAgIC5yZXF1aXJlZCgpLFxuICB0d2l0dGVyU2VhcmNoZXM6IEpvaS5hcnJheSgpXG4gICAgLml0ZW1zKEpvaS5zdHJpbmcoKSlcbiAgICAuZGVmYXVsdCgoKSA9PiBbXSwgJ0RvIG5vdCBhbGxvdyB1bmRlZmluZWQgb3IgbnVsbCB0byBjb21lIG91dCBvZiB0aGUgREInKSxcbn0pXG4gIC51bmtub3duKClcbiAgLnJlcXVpcmVkKCk7XG4iXX0=